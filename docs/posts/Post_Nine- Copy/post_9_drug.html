<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sue-Ellen Duffy">
<meta name="dcterms.date" content="2024-05-05">

<title>Social_Networks_Blog_Space - POST 9</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Social_Networks_Blog_Space</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">POST 9</h1>
            <p class="subtitle lead">mostly notes</p>
                                <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">analysis</div>
                <div class="quarto-category">block_model</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Sue-Ellen Duffy </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 5, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sna)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(intergraph)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stplanr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This post will explore the Synthetic Mass network data in more detail.</p>
<section id="read-in-data" class="level1">
<h1>Read in Data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pat_attr <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data/pat_attr.csv"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pro_attr <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data/pro_attr.csv"</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>encounters_cleaning <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data//encounters_cleaning.csv"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>encounters_cleaned <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data//encounters_cleaned.csv"</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>encounter_attributes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data/encounter_attributes.csv"</span>, </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>encounters_el  <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data/encounters_el.csv"</span>, </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>encounters_st_3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"post5drug_data/encounters.st.3.csv"</span>, </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(<span class="at">...1 =</span> <span class="fu">col_skip</span>()))</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>attribute_list <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"post5drug_data/attribute_list.csv"</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>pat_blks6 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"pat_blks6_results.rds"</span>)</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>prov_blks6 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"prov_blks6_results.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-bipartite-network-with-attributes" class="level1">
<h1>Create bipartite network with attributes</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>encounters.stat <span class="ot">&lt;-</span> <span class="fu">network</span>(encounters_el,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">bipartite =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">matrix.type =</span> <span class="st">"edgelist"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">vertex.attr =</span> attribute_list)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>encounters.ig <span class="ot">&lt;-</span> <span class="fu">graph_from_biadjacency_matrix</span>(encounters.stat)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>attributes <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(pat_attr, pro_attr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-an-adjacency-matrix-using-sna" class="level1">
<h1>create an adjacency matrix using sna</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>encounters.sna <span class="ot">&lt;-</span> <span class="fu">network</span>(<span class="fu">as.matrix</span>(encounters.stat), <span class="at">directed =</span> F)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>encounters.m <span class="ot">&lt;-</span> encounters.sna[,] <span class="co"># extract an adjacency matrix from the network object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="matrix-multiplication---for-overlap-count" class="level1">
<h1>Matrix Multiplication - For Overlap Count</h1>
<p>Cross-Product Method with manual matrix multiplication Multiply a two-mode matrix by its transpose to produce a one-mode network that reflects the ties between the nodes in one of the two modes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>patient.m <span class="ot">&lt;-</span> <span class="fu">t</span>(encounters.m) <span class="sc">%*%</span> encounters.m</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(patient.m) <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>provider.m <span class="ot">&lt;-</span>   encounters.m <span class="sc">%*%</span> <span class="fu">t</span>(encounters.m)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(provider.m) <span class="ot">&lt;-</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>patient.ig <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(patient.m, </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">mode =</span> <span class="st">"undirected"</span>, </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">weighted =</span> <span class="cn">TRUE</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>patient.ig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 5d3c26e UNW- 222 497 -- 
+ attr: name (v/c), weight (e/n)
+ edges from 5d3c26e (vertex names):
 [1] Elijah719 White193--Fidel864 Swift555       
 [2] Elijah719 White193--Virgen207 Hyatt152      
 [3] Elijah719 White193--Zachery872 Pagac496     
 [4] Fidel864 Swift555 --Virgen207 Hyatt152      
 [5] Fidel864 Swift555 --Zachery872 Pagac496     
 [6] Fidel864 Swift555 --Emory494 Schuster709    
 [7] Fidel864 Swift555 --Sherwood961 Aufderhar910
 [8] Fidel864 Swift555 --Jess275 Gutmann970      
+ ... omitted several edges</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>provider.ig <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(provider.m, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">mode =</span> <span class="st">"undirected"</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">weighted =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>provider.ig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 5d42e38 UNW- 86 265 -- 
+ attr: name (v/c), weight (e/n)
+ edges from 5d42e38 (vertex names):
 [1] Adam631 Hoppe518       --Alissa315 Altenwerth646
 [2] Adam631 Hoppe518       --Johnny786 Smith67      
 [3] Adam631 Hoppe518       --Mose244 Cummerata161   
 [4] Adam631 Hoppe518       --Tommy814 Miller503     
 [5] Alesha810 Heaney114    --Anthony633 Kutch271    
 [6] Alissa315 Altenwerth646--Esther279 Schroeder447 
 [7] Alissa315 Altenwerth646--Gordon377 Marquardt819 
 [8] Alissa315 Altenwerth646--Guadalupe206 Wuckert783
+ ... omitted several edges</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(patient.ig)<span class="sc">$</span>weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 1 1 1 1 2 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 2 1 1 2 1 1 1 2
 [38] 1 1 1 1 1 1 2 4 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
 [75] 1 1 1 1 1 1 1 1 1 1 3 2 2 1 1 1 2 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3
[112] 1 1 1 1 1 1 2 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 2 1 2
[149] 1 1 1 1 2 1 1 2 1 1 1 1 1 1 1 2 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 2 2
[186] 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 2 3 1 1
[223] 1 1 1 1 1 1 1 2 1 1 1 1 1 1 2 1 2 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[260] 1 2 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 2 1 1 1 1
[297] 3 2 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[334] 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 1 1 1 2 1 1 1
[371] 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[408] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[445] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
[482] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(provider.ig)<span class="sc">$</span>weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 1 2 2 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 2
 [38] 1 1 2 1 1 1 1 1 1 1 1 1 3 1 1 1 1 4 2 1 1 3 2 1 1 1 2 1 1 1 1 2 1 1 2 1 2
 [75] 2 1 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1
[112] 2 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 1 3 1 1 1 1 1 1 3 1 3
[149] 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 3 1 2 3 1 1 1 1
[186] 2 3 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2
[223] 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1
[260] 1 1 1 1 1 3</code></pre>
</div>
</div>
<p>SO providers it seems overlap with the same patients with the most being 4 times an overlap.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ade4) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ade4' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">graph_from_data_frame</span>(encounters_cleaned, <span class="at">directed=</span><span class="cn">FALSE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>bipartite_matrix <span class="ot">&lt;-</span> <span class="fu">as_biadjacency_matrix</span>(encounters.ig)  <span class="co"># Extract the matrix</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>patient_jaccard <span class="ot">&lt;-</span> <span class="fu">dist.binary</span>(bipartite_matrix, <span class="at">method=</span><span class="dv">1</span>, <span class="at">upper=</span><span class="cn">TRUE</span>, <span class="at">diag =</span> <span class="cn">FALSE</span>) <span class="co"># Method #1 is "Jaccard Index"</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>provider_jaccard <span class="ot">&lt;-</span> <span class="fu">dist.binary</span>(<span class="fu">t</span>(bipartite_matrix), <span class="at">method=</span><span class="dv">1</span>, <span class="at">upper=</span><span class="cn">TRUE</span>, <span class="at">diag =</span> <span class="cn">FALSE</span>) </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>patient_jaccard <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(patient_jaccard)   </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(patient_jaccard)<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># women_jaccard          # Look at the matrix before you binarize</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>patient_jaccard <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(patient_jaccard<span class="sc">&gt;</span><span class="fl">0.95</span>, <span class="dv">1</span>, <span class="dv">0</span>)     <span class="co"># Binarize</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># jaccard_women      # Take a look at the matrix if you like.</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>jacc_patient <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(patient_jaccard,    <span class="co"># Create an igraph network</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">mode =</span> <span class="st">"undirected"</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(jacc_patient,<span class="at">vertex.label =</span> <span class="cn">NA</span>,      <span class="at">vertex.label.dist =</span> <span class="dv">2</span>, </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">3</span>, <span class="at">vertex.label.cex =</span> <span class="fl">0.2</span>,)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>patient_correl <span class="ot">&lt;-</span> <span class="fu">cor</span>(<span class="fu">t</span>(bipartite_matrix))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>provider_correl <span class="ot">&lt;-</span> <span class="fu">cor</span>(bipartite_matrix)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>patient_correl <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(patient_correl)   </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># patient_correl          # Look at the matrix before you binarize</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>correl_patient <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(patient_correl<span class="sc">&gt;</span><span class="fl">0.6</span>, <span class="dv">1</span>, <span class="dv">0</span>)    <span class="co"># Binarize </span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(correl_patient)<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>corr_patient <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(correl_patient, </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">mode =</span> <span class="st">"undirected"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(corr_patient,     <span class="at">vertex.label.dist =</span> .<span class="dv">5</span>, </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">3</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'psych' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'psych'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:ggplot2':

    %+%, alpha</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>patient_Q <span class="ot">&lt;-</span><span class="fu">YuleCor</span>(<span class="fu">t</span>(bipartite_matrix))<span class="sc">$</span>rho</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>provider_Q <span class="ot">&lt;-</span><span class="fu">YuleCor</span>(bipartite_matrix)<span class="sc">$</span>rho</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>patient_Q <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(patient_Q) </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(patient_Q, <span class="dv">10</span>,<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                        Adam631 Hoppe518 Alesha810 Heaney114
Adam631 Hoppe518             0.999977634           0.2571596
Alesha810 Heaney114          0.257159556           0.9999706
Alissa315 Altenwerth646      0.921939729           0.2571596
Analisa263 Kohler843         0.120355835           0.2571596
Annice210 Gleason633         0.257159556           0.3843690
Anthony633 Kutch271          0.257159556           0.9637365
Benedict104 Hintz995         0.430178690           0.5386251
Carl856 Rempel203            0.009474183           0.1504567
Chanell45 Morissette863      0.009474183           0.1504567
Chaya236 Sporer811           0.257159556           0.3843690
                        Alissa315 Altenwerth646 Analisa263 Kohler843
Adam631 Hoppe518                    0.921939729          0.120355835
Alesha810 Heaney114                 0.257159556          0.257159556
Alissa315 Altenwerth646             0.999977634          0.120355835
Analisa263 Kohler843                0.120355835          0.999977634
Annice210 Gleason633                0.257159556          0.257159556
Anthony633 Kutch271                 0.257159556          0.257159556
Benedict104 Hintz995                0.430178690          0.430178690
Carl856 Rempel203                   0.009474183          0.009474183
Chanell45 Morissette863             0.009474183          0.009474183
Chaya236 Sporer811                  0.257159556          0.257159556
                        Annice210 Gleason633 Anthony633 Kutch271
Adam631 Hoppe518                   0.2571596           0.2571596
Alesha810 Heaney114                0.3843690           0.9637365
Alissa315 Altenwerth646            0.2571596           0.2571596
Analisa263 Kohler843               0.2571596           0.2571596
Annice210 Gleason633               0.9999706           0.3843690
Anthony633 Kutch271                0.3843690           0.9999706
Benedict104 Hintz995               0.5386251           0.5386251
Carl856 Rempel203                  0.1504567           0.1504567
Chanell45 Morissette863            0.1504567           0.1504567
Chaya236 Sporer811                 0.3843690           0.3843690
                        Benedict104 Hintz995 Carl856 Rempel203
Adam631 Hoppe518                   0.4301787       0.009474183
Alesha810 Heaney114                0.5386251       0.150456744
Alissa315 Altenwerth646            0.4301787       0.009474183
Analisa263 Kohler843               0.4301787       0.009474183
Annice210 Gleason633               0.5386251       0.150456744
Anthony633 Kutch271                0.5386251       0.150456744
Benedict104 Hintz995               0.9999567       0.335195531
Carl856 Rempel203                  0.3351955       0.999981937
Chanell45 Morissette863            0.3351955       0.866173075
Chaya236 Sporer811                 0.5386251       0.929777343
                        Chanell45 Morissette863 Chaya236 Sporer811
Adam631 Hoppe518                    0.009474183          0.2571596
Alesha810 Heaney114                 0.150456744          0.3843690
Alissa315 Altenwerth646             0.009474183          0.2571596
Analisa263 Kohler843                0.009474183          0.2571596
Annice210 Gleason633                0.150456744          0.3843690
Anthony633 Kutch271                 0.150456744          0.3843690
Benedict104 Hintz995                0.335195531          0.5386251
Carl856 Rempel203                   0.866173075          0.9297773
Chanell45 Morissette863             0.999981937          0.9297773
Chaya236 Sporer811                  0.929777343          0.9999706
                        Cherise743 Prosacco716 Cindi877 Hane680
Adam631 Hoppe518                   0.009474183      0.009474183
Alesha810 Heaney114                0.150456744      0.150456744
Alissa315 Altenwerth646            0.009474183      0.009474183
Analisa263 Kohler843               0.009474183      0.897590847
Annice210 Gleason633               0.150456744      0.150456744
Anthony633 Kutch271                0.150456744      0.150456744
Benedict104 Hintz995               0.335195531      0.335195531
Carl856 Rempel203                 -0.101651842     -0.101651842
Chanell45 Morissette863           -0.101651842     -0.101651842
Chaya236 Sporer811                 0.150456744      0.150456744
                        Cruz300 Wilderman619 Damian46 Dach178 Diana207 Stamm704
Adam631 Hoppe518                   0.1203558        0.4301787         0.2571596
Alesha810 Heaney114                0.2571596        0.5386251         0.3843690
Alissa315 Altenwerth646            0.1203558        0.4301787         0.2571596
Analisa263 Kohler843               0.1203558        0.4301787         0.2571596
Annice210 Gleason633               0.2571596        0.5386251         0.3843690
Anthony633 Kutch271                0.2571596        0.5386251         0.3843690
Benedict104 Hintz995               0.4301787        0.6636156         0.5386251
Carl856 Rempel203                  0.8975908        0.3351955         0.1504567
Chanell45 Morissette863            0.9715857        0.3351955         0.1504567
Chaya236 Sporer811                 0.9466874        0.5386251         0.3843690
                        Dinorah501 Bechtelar572 Donald774 Krajcik437
Adam631 Hoppe518                    0.009474183            0.2571596
Alesha810 Heaney114                 0.150456744            0.3843690
Alissa315 Altenwerth646             0.009474183            0.2571596
Analisa263 Kohler843                0.009474183            0.2571596
Annice210 Gleason633                0.150456744            0.3843690
Anthony633 Kutch271                 0.150456744            0.3843690
Benedict104 Hintz995                0.335195531            0.5386251
Carl856 Rempel203                  -0.101651842            0.1504567
Chanell45 Morissette863            -0.101651842            0.1504567
Chaya236 Sporer811                  0.150456744            0.3843690
                        Dorothea248 Fritsch593 Dortha70 Rutherford999
Adam631 Hoppe518                     0.1203558            0.120355835
Alesha810 Heaney114                  0.2571596            0.257159556
Alissa315 Altenwerth646              0.1203558            0.120355835
Analisa263 Kohler843                 0.1203558            0.120355835
Annice210 Gleason633                 0.2571596            0.257159556
Anthony633 Kutch271                  0.2571596            0.257159556
Benedict104 Hintz995                 0.4301787            0.430178690
Carl856 Rempel203                    0.8975908            0.009474183
Chanell45 Morissette863              0.8975908            0.009474183
Chaya236 Sporer811                   0.9466874            0.257159556
                        Dusti191 Maggio310 Elease461 Boehm581
Adam631 Hoppe518               0.120355835        0.120355835
Alesha810 Heaney114            0.257159556        0.257159556
Alissa315 Altenwerth646        0.120355835        0.120355835
Analisa263 Kohler843           0.120355835        0.120355835
Annice210 Gleason633           0.257159556        0.257159556
Anthony633 Kutch271            0.257159556        0.257159556
Benedict104 Hintz995           0.430178690        0.430178690
Carl856 Rempel203              0.009474183        0.009474183
Chanell45 Morissette863        0.009474183        0.009474183
Chaya236 Sporer811             0.257159556        0.257159556
                        Esther279 Schroeder447 Everette494 O'Hara248
Adam631 Hoppe518                   0.120355835             0.2571596
Alesha810 Heaney114                0.257159556             0.3843690
Alissa315 Altenwerth646            0.921939729             0.2571596
Analisa263 Kohler843               0.120355835             0.2571596
Annice210 Gleason633               0.257159556             0.3843690
Anthony633 Kutch271                0.257159556             0.3843690
Benedict104 Hintz995               0.430178690             0.5386251
Carl856 Rempel203                  0.009474183             0.1504567
Chanell45 Morissette863            0.009474183             0.1504567
Chaya236 Sporer811                 0.257159556             0.3843690
                        Gino587 Vandervort697 Gordon377 Marquardt819
Adam631 Hoppe518                    0.2571596            -0.08221549
Alesha810 Heaney114                 0.3843690             0.05967181
Alissa315 Altenwerth646             0.2571596             0.87363120
Analisa263 Kohler843                0.2571596            -0.08221549
Annice210 Gleason633                0.3843690             0.05967181
Anthony633 Kutch271                 0.3843690             0.05967181
Benedict104 Hintz995                0.5386251             0.25131502
Carl856 Rempel203                   0.1504567            -0.19149751
Chanell45 Morissette863             0.1504567            -0.19149751
Chaya236 Sporer811                  0.3843690             0.05967181
                        Guadalupe206 Wuckert783 Gwen761 Keeling57
Adam631 Hoppe518                    0.120355835         0.4301787
Alesha810 Heaney114                 0.257159556         0.5386251
Alissa315 Altenwerth646             0.921939729         0.4301787
Analisa263 Kohler843                0.120355835         0.4301787
Annice210 Gleason633                0.989917507         0.5386251
Anthony633 Kutch271                 0.257159556         0.5386251
Benedict104 Hintz995                0.430178690         0.6636156
Carl856 Rempel203                   0.009474183         0.3351955
Chanell45 Morissette863             0.009474183         0.3351955
Chaya236 Sporer811                  0.257159556         0.5386251
                        Ivan258 Hills818 Jeanelle736 Simonis280
Adam631 Hoppe518             0.120355835              0.2571596
Alesha810 Heaney114          0.257159556              0.3843690
Alissa315 Altenwerth646      0.120355835              0.2571596
Analisa263 Kohler843         0.120355835              0.2571596
Annice210 Gleason633         0.257159556              0.3843690
Anthony633 Kutch271          0.257159556              0.3843690
Benedict104 Hintz995         0.430178690              0.5386251
Carl856 Rempel203            0.009474183              0.1504567
Chanell45 Morissette863      0.009474183              0.1504567
Chaya236 Sporer811           0.257159556              0.3843690
                        Jeanette800 Schinner682 Johnnie679 Hand679
Adam631 Hoppe518                    0.120355835        0.120355835
Alesha810 Heaney114                 0.257159556        0.257159556
Alissa315 Altenwerth646             0.120355835        0.921939729
Analisa263 Kohler843                0.120355835        0.120355835
Annice210 Gleason633                0.257159556        0.257159556
Anthony633 Kutch271                 0.257159556        0.257159556
Benedict104 Hintz995                0.430178690        0.430178690
Carl856 Rempel203                   0.009474183        0.009474183
Chanell45 Morissette863             0.009474183        0.009474183
Chaya236 Sporer811                  0.257159556        0.257159556
                        Johnny786 Smith67 Jorge203 Ferry570
Adam631 Hoppe518                0.9899175       0.120355835
Alesha810 Heaney114             0.3843690       0.257159556
Alissa315 Altenwerth646         0.9899175       0.921939729
Analisa263 Kohler843            0.2571596       0.120355835
Annice210 Gleason633            0.3843690       0.257159556
Anthony633 Kutch271             0.3843690       0.257159556
Benedict104 Hintz995            0.5386251       0.430178690
Carl856 Rempel203               0.1504567       0.009474183
Chanell45 Morissette863         0.1504567       0.009474183
Chaya236 Sporer811              0.3843690       0.257159556
                        Julianne852 Barrows492 Kandis954 Koepp521
Adam631 Hoppe518                   0.120355835          0.2571596
Alesha810 Heaney114                0.257159556          0.3843690
Alissa315 Altenwerth646            0.120355835          0.2571596
Analisa263 Kohler843               0.120355835          0.2571596
Annice210 Gleason633               0.257159556          0.3843690
Anthony633 Kutch271                0.257159556          0.3843690
Benedict104 Hintz995               0.430178690          0.5386251
Carl856 Rempel203                  0.009474183          0.1504567
Chanell45 Morissette863            0.009474183          0.1504567
Chaya236 Sporer811                 0.257159556          0.3843690
                        Kathlyn335 Wisozk929 Kathrine376 Bosco882
Adam631 Hoppe518                   0.2571596            0.2571596
Alesha810 Heaney114                0.3843690            0.3843690
Alissa315 Altenwerth646            0.2571596            0.2571596
Analisa263 Kohler843               0.2571596            0.2571596
Annice210 Gleason633               0.3843690            0.3843690
Anthony633 Kutch271                0.3843690            0.3843690
Benedict104 Hintz995               0.5386251            0.5386251
Carl856 Rempel203                  0.1504567            0.1504567
Chanell45 Morissette863            0.1504567            0.1504567
Chaya236 Sporer811                 0.3843690            0.3843690
                        Krystina167 Muller251 Lan153 Schmidt332 Lani848 Cole117
Adam631 Hoppe518                    0.2571596       -0.08221549     0.120355835
Alesha810 Heaney114                 0.3843690        0.05967181     0.257159556
Alissa315 Altenwerth646             0.2571596       -0.08221549     0.921939729
Analisa263 Kohler843                0.2571596       -0.08221549     0.120355835
Annice210 Gleason633                0.3843690        0.05967181     0.257159556
Anthony633 Kutch271                 0.3843690        0.05967181     0.257159556
Benedict104 Hintz995                0.5386251        0.25131502     0.430178690
Carl856 Rempel203                   0.1504567       -0.19149751     0.009474183
Chanell45 Morissette863             0.1504567       -0.19149751     0.009474183
Chaya236 Sporer811                  0.3843690        0.05967181     0.257159556
                        Lawerence6 Grimes165 Leland44 Huels583
Adam631 Hoppe518                 0.120355835         0.2571596
Alesha810 Heaney114              0.257159556         0.3843690
Alissa315 Altenwerth646          0.120355835         0.2571596
Analisa263 Kohler843             0.120355835         0.2571596
Annice210 Gleason633             0.257159556         0.3843690
Anthony633 Kutch271              0.257159556         0.3843690
Benedict104 Hintz995             0.430178690         0.5386251
Carl856 Rempel203                0.009474183         0.1504567
Chanell45 Morissette863          0.009474183         0.1504567
Chaya236 Sporer811               0.257159556         0.3843690
                        Lemuel304 Mante251 Leonel449 Witting912
Adam631 Hoppe518               0.009474183          0.009474183
Alesha810 Heaney114            0.150456744          0.150456744
Alissa315 Altenwerth646        0.897590847          0.897590847
Analisa263 Kohler843           0.897590847          0.897590847
Annice210 Gleason633           0.150456744          0.150456744
Anthony633 Kutch271            0.150456744          0.150456744
Benedict104 Hintz995           0.335195531          0.335195531
Carl856 Rempel203             -0.101651842         -0.101651842
Chanell45 Morissette863       -0.101651842         -0.101651842
Chaya236 Sporer811             0.150456744          0.150456744
                        Lorina403 Cronin387 Lorretta561 Metz686
Adam631 Hoppe518                  0.2571596           0.1203558
Alesha810 Heaney114               0.3843690           0.2571596
Alissa315 Altenwerth646           0.2571596           0.1203558
Analisa263 Kohler843              0.2571596           0.1203558
Annice210 Gleason633              0.3843690           0.2571596
Anthony633 Kutch271               0.3843690           0.2571596
Benedict104 Hintz995              0.5386251           0.4301787
Carl856 Rempel203                 0.1504567           0.8975908
Chanell45 Morissette863           0.9297773           0.9715857
Chaya236 Sporer811                0.3843690           0.9466874
                        Lou594 Krajcik437 Madelyn308 Schumm995
Adam631 Hoppe518                0.2571596          0.009474183
Alesha810 Heaney114             0.3843690          0.150456744
Alissa315 Altenwerth646         0.2571596          0.897590847
Analisa263 Kohler843            0.2571596          0.009474183
Annice210 Gleason633            0.3843690          0.150456744
Anthony633 Kutch271             0.3843690          0.150456744
Benedict104 Hintz995            0.5386251          0.335195531
Carl856 Rempel203               0.1504567         -0.101651842
Chanell45 Morissette863         0.1504567         -0.101651842
Chaya236 Sporer811              0.3843690          0.150456744
                        Marcos263 Mills423 Margarito178 Schulist381
Adam631 Hoppe518                 0.2571596              0.120355835
Alesha810 Heaney114              0.3843690              0.257159556
Alissa315 Altenwerth646          0.2571596              0.120355835
Analisa263 Kohler843             0.2571596              0.120355835
Annice210 Gleason633             0.3843690              0.257159556
Anthony633 Kutch271              0.3843690              0.257159556
Benedict104 Hintz995             0.5386251              0.999083410
Carl856 Rempel203                0.1504567              0.009474183
Chanell45 Morissette863          0.1504567              0.009474183
Chaya236 Sporer811               0.3843690              0.257159556
                        Mario764 Glover433 Maryellen651 Conn188 Mia349 Runte676
Adam631 Hoppe518               0.009474183            0.2571596     0.120355835
Alesha810 Heaney114            0.150456744            0.3843690     0.257159556
Alissa315 Altenwerth646        0.897590847            0.9466874     0.120355835
Analisa263 Kohler843           0.009474183            0.2571596     0.120355835
Annice210 Gleason633           0.150456744            0.3843690     0.257159556
Anthony633 Kutch271            0.150456744            0.3843690     0.257159556
Benedict104 Hintz995           0.335195531            0.5386251     0.430178690
Carl856 Rempel203             -0.101651842            0.1504567     0.009474183
Chanell45 Morissette863       -0.101651842            0.1504567     0.009474183
Chaya236 Sporer811             0.150456744            0.3843690     0.257159556
                        Monroe732 Fritsch593 Mose244 Cummerata161
Adam631 Hoppe518                   0.2571596          0.980751604
Alesha810 Heaney114                0.3843690          0.257159556
Alissa315 Altenwerth646            0.2571596          0.120355835
Analisa263 Kohler843               0.2571596          0.120355835
Annice210 Gleason633               0.3843690          0.257159556
Anthony633 Kutch271                0.3843690          0.257159556
Benedict104 Hintz995               0.5386251          0.430178690
Carl856 Rempel203                  0.1504567          0.009474183
Chanell45 Morissette863            0.1504567          0.009474183
Chaya236 Sporer811                 0.3843690          0.257159556
                        Mozelle144 Zboncak558 Nelida367 Emard19
Adam631 Hoppe518                  0.120355835       0.120355835
Alesha810 Heaney114               0.257159556       0.257159556
Alissa315 Altenwerth646           0.120355835       0.120355835
Analisa263 Kohler843              0.120355835       0.120355835
Annice210 Gleason633              0.257159556       0.257159556
Anthony633 Kutch271               0.257159556       0.257159556
Benedict104 Hintz995              0.430178690       0.430178690
Carl856 Rempel203                 0.009474183       0.009474183
Chanell45 Morissette863           0.009474183       0.009474183
Chaya236 Sporer811                0.257159556       0.257159556
                        Odilia72 Upton904 Ola364 Kreiger457 Oliva247 Braun514
Adam631 Hoppe518              0.120355835       0.120355835       0.120355835
Alesha810 Heaney114           0.257159556       0.257159556       0.257159556
Alissa315 Altenwerth646       0.120355835       0.120355835       0.120355835
Analisa263 Kohler843          0.120355835       0.120355835       0.120355835
Annice210 Gleason633          0.257159556       0.257159556       0.257159556
Anthony633 Kutch271           0.257159556       0.257159556       0.257159556
Benedict104 Hintz995          0.430178690       0.430178690       0.430178690
Carl856 Rempel203             0.009474183       0.009474183       0.009474183
Chanell45 Morissette863       0.009474183       0.009474183       0.009474183
Chaya236 Sporer811            0.257159556       0.257159556       0.257159556
                        Ouida808 Carroll471 Ramon749 Kozey370
Adam631 Hoppe518                  0.2571596       -0.22500922
Alesha810 Heaney114               0.3843690       -0.08654262
Alissa315 Altenwerth646           0.2571596        0.82684289
Analisa263 Kohler843              0.2571596       -0.22500922
Annice210 Gleason633              0.3843690       -0.08654262
Anthony633 Kutch271               0.3843690       -0.08654262
Benedict104 Hintz995              0.5386251        0.10989011
Carl856 Rempel203                 0.1504567        0.77626624
Chanell45 Morissette863           0.1504567        0.77626624
Chaya236 Sporer811                0.3843690        0.87986464
                        Regan713 Kertzmann286 Rod343 Prosacco716
Adam631 Hoppe518                  0.009474183          0.2571596
Alesha810 Heaney114               0.150456744          0.3843690
Alissa315 Altenwerth646           0.009474183          0.2571596
Analisa263 Kohler843              0.009474183          0.2571596
Annice210 Gleason633              0.150456744          0.3843690
Anthony633 Kutch271               0.150456744          0.3843690
Benedict104 Hintz995              0.335195531          0.5386251
Carl856 Rempel203                -0.101651842          0.1504567
Chanell45 Morissette863          -0.101651842          0.1504567
Chaya236 Sporer811                0.150456744          0.3843690
                        Rolland302 Kassulke119 Rosamaria757 Orn563
Adam631 Hoppe518                   0.120355835         0.009474183
Alesha810 Heaney114                0.257159556         0.150456744
Alissa315 Altenwerth646            0.921939729         0.009474183
Analisa263 Kohler843               0.120355835         0.009474183
Annice210 Gleason633               0.257159556         0.150456744
Anthony633 Kutch271                0.257159556         0.150456744
Benedict104 Hintz995               0.430178690         0.335195531
Carl856 Rempel203                  0.009474183        -0.101651842
Chanell45 Morissette863            0.009474183        -0.101651842
Chaya236 Sporer811                 0.257159556         0.150456744
                        Rudy520 Hettinger594 Rupert654 Jenkins714
Adam631 Hoppe518                 0.009474183          0.120355835
Alesha810 Heaney114              0.150456744          0.257159556
Alissa315 Altenwerth646          0.897590847          0.921939729
Analisa263 Kohler843             0.009474183          0.120355835
Annice210 Gleason633             0.150456744          0.257159556
Anthony633 Kutch271              0.150456744          0.257159556
Benedict104 Hintz995             0.335195531          0.430178690
Carl856 Rempel203               -0.101651842          0.009474183
Chanell45 Morissette863         -0.101651842          0.009474183
Chaya236 Sporer811               0.150456744          0.257159556
                        Russell422 Stracke611 Ryann170 Spencer878
Adam631 Hoppe518                    0.2571596         0.009474183
Alesha810 Heaney114                 0.3843690         0.150456744
Alissa315 Altenwerth646             0.2571596         0.009474183
Analisa263 Kohler843                0.2571596         0.009474183
Annice210 Gleason633                0.3843690         0.150456744
Anthony633 Kutch271                 0.3843690         0.150456744
Benedict104 Hintz995                0.5386251         0.335195531
Carl856 Rempel203                   0.1504567        -0.101651842
Chanell45 Morissette863             0.1504567        -0.101651842
Chaya236 Sporer811                  0.3843690         0.150456744
                        Sabine292 Feil794 Sandee884 Rice937
Adam631 Hoppe518              -0.15929908         0.2571596
Alesha810 Heaney114           -0.01850995         0.3843690
Alissa315 Altenwerth646        0.85005154         0.2571596
Analisa263 Kohler843          -0.15929908         0.2571596
Annice210 Gleason633          -0.01850995         0.3843690
Anthony633 Kutch271           -0.01850995         0.3843690
Benedict104 Hintz995           0.17669796         0.5386251
Carl856 Rempel203             -0.26564138         0.1504567
Chanell45 Morissette863       -0.26564138         0.1504567
Chaya236 Sporer811            -0.01850995         0.3843690
                        Serena400 Powlowski563 Shara355 Bruen238
Adam631 Hoppe518                   0.009474183       0.120355835
Alesha810 Heaney114                0.150456744       0.257159556
Alissa315 Altenwerth646            0.009474183       0.120355835
Analisa263 Kohler843               0.009474183       0.120355835
Annice210 Gleason633               0.150456744       0.257159556
Anthony633 Kutch271                0.150456744       0.257159556
Benedict104 Hintz995               0.335195531       0.430178690
Carl856 Rempel203                  0.866173075       0.009474183
Chanell45 Morissette863            0.866173075       0.009474183
Chaya236 Sporer811                 0.929777343       0.257159556
                        Shila857 Heller342 Spencer878 Bailey598
Adam631 Hoppe518               0.009474183            0.2571596
Alesha810 Heaney114            0.150456744            0.3843690
Alissa315 Altenwerth646        0.009474183            0.2571596
Analisa263 Kohler843           0.009474183            0.2571596
Annice210 Gleason633           0.150456744            0.3843690
Anthony633 Kutch271            0.150456744            0.3843690
Benedict104 Hintz995           0.335195531            0.5386251
Carl856 Rempel203             -0.101651842            0.1504567
Chanell45 Morissette863       -0.101651842            0.1504567
Chaya236 Sporer811             0.150456744            0.3843690
                        Stanley702 Cremin516 Stephan15 Auer97 Tera136 Swift555
Adam631 Hoppe518                 -0.08221549        0.2571596      0.120355835
Alesha810 Heaney114               0.05967181        0.3843690      0.257159556
Alissa315 Altenwerth646          -0.08221549        0.2571596      0.120355835
Analisa263 Kohler843             -0.08221549        0.2571596      0.120355835
Annice210 Gleason633              0.05967181        0.3843690      0.257159556
Anthony633 Kutch271               0.05967181        0.3843690      0.257159556
Benedict104 Hintz995              0.25131502        0.5386251      0.430178690
Carl856 Rempel203                -0.19149751        0.1504567      0.009474183
Chanell45 Morissette863          -0.19149751        0.1504567      0.009474183
Chaya236 Sporer811                0.05967181        0.3843690      0.257159556
                        Theodore876 Thiel172 Tomika243 Walker122
Adam631 Hoppe518                   0.1203558         -0.15929908
Alesha810 Heaney114                0.2571596         -0.01850995
Alissa315 Altenwerth646            0.1203558         -0.15929908
Analisa263 Kohler843               0.1203558         -0.15929908
Annice210 Gleason633               0.2571596         -0.01850995
Anthony633 Kutch271                0.2571596         -0.01850995
Benedict104 Hintz995               0.4301787          0.17669796
Carl856 Rempel203                  0.8975908         -0.26564138
Chanell45 Morissette863            0.8975908         -0.26564138
Chaya236 Sporer811                 0.9466874         -0.01850995
                        Tommy814 Miller503 Troy560 Kohler843
Adam631 Hoppe518               0.921939729       0.120355835
Alesha810 Heaney114            0.257159556       0.257159556
Alissa315 Altenwerth646        0.120355835       0.120355835
Analisa263 Kohler843           0.120355835       0.120355835
Annice210 Gleason633           0.257159556       0.257159556
Anthony633 Kutch271            0.257159556       0.257159556
Benedict104 Hintz995           0.430178690       0.430178690
Carl856 Rempel203              0.009474183       0.009474183
Chanell45 Morissette863        0.009474183       0.009474183
Chaya236 Sporer811             0.257159556       0.257159556
                        Tyler508 Ankunding277 Wilburn655 Sipes176
Adam631 Hoppe518                  0.120355835           0.4301787
Alesha810 Heaney114               0.257159556           0.5386251
Alissa315 Altenwerth646           0.120355835           0.4301787
Analisa263 Kohler843              0.120355835           0.4301787
Annice210 Gleason633              0.257159556           0.5386251
Anthony633 Kutch271               0.257159556           0.5386251
Benedict104 Hintz995              0.430178690           0.6636156
Carl856 Rempel203                 0.009474183           0.3351955
Chanell45 Morissette863           0.009474183           0.3351955
Chaya236 Sporer811                0.257159556           0.5386251
                        Wilfred787 Nienow652
Adam631 Hoppe518                 0.120355835
Alesha810 Heaney114              0.257159556
Alissa315 Altenwerth646          0.120355835
Analisa263 Kohler843             0.120355835
Annice210 Gleason633             0.257159556
Anthony633 Kutch271              0.257159556
Benedict104 Hintz995             0.430178690
Carl856 Rempel203                0.009474183
Chanell45 Morissette863          0.009474183
Chaya236 Sporer811               0.257159556</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>Q_patient <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(patient_Q<span class="sc">&gt;</span><span class="fl">0.9</span>, <span class="dv">1</span>, <span class="dv">0</span>) <span class="co"># Binarize</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(Q_patient)<span class="ot">&lt;-</span><span class="dv">0</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Q_patient    # Take a look at the matrix</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>YQ_patient <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(Q_patient,     <span class="co"># Create an igraph network</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">mode =</span> <span class="st">"undirected"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(YQ_patient,   <span class="at">vertex.label.dist =</span> <span class="dv">1</span>, </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">5</span>, <span class="at">vertex.label.cex =</span> .<span class="dv">8</span>, <span class="at">layout =</span> layout_with_fr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>layouts <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"^layout_"</span>, <span class="fu">ls</span>(<span class="st">"package:igraph"</span>), <span class="at">value=</span><span class="cn">TRUE</span>)[<span class="sc">-</span><span class="dv">1</span>] </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove layouts that do not apply to our graph.</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>layouts <span class="ot">&lt;-</span> layouts[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">"bipartite|merge|norm|sugiyama|tree"</span>, layouts)]</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (layout <span class="cf">in</span> layouts) {</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(layout)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  l <span class="ot">&lt;-</span> <span class="fu">do.call</span>(layout, <span class="fu">list</span>(encounters.ig)) </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(encounters.ig, <span class="at">vertex.label =</span> <span class="cn">NA</span>,      <span class="at">vertex.label.dist =</span> <span class="dv">2</span>, </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">3</span>, <span class="at">vertex.label.cex =</span> <span class="fl">0.2</span>, <span class="at">edge.arrow.mode=</span><span class="dv">0</span>, <span class="at">layout=</span>l, <span class="at">main=</span>layout) }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_as_star"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_components"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_in_circle"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_nicely"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_on_grid"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_on_sphere"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_randomly"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_dh"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_drl"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_fr"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_gem"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_graphopt"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_kk"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_lgl"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in layout_with_lgl(structure(list(308, FALSE, c(86, 87, 88, 89, : At
vendor/cigraph/src/layout/large_graph.c:174 : LGL layout does not support
disconnected graphs yet.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "layout_with_mds"</code></pre>
</div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edge_density</span>(encounters.ig, <span class="at">loops=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.007212657</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(encounters.ig, <span class="at">type=</span><span class="st">"global"</span>)  <span class="co"># net is treated as an undirected network</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(<span class="fu">as.undirected</span>(encounters.ig, <span class="at">mode=</span><span class="st">"collapse"</span>)) <span class="co"># same as above</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">triad_census</span>(encounters.ig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in triad_census(encounters.ig): At
vendor/cigraph/src/misc/motifs.c:1140 : Triad census called on an undirected
graph. All connections will be treated as mutual.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4718886       0  102594       0       0       0       0       0       0
[10]       0     876       0       0       0       0       0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diameter</span>(encounters.ig, <span class="at">directed=</span>F, <span class="at">weights=</span><span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diameter</span>(encounters.ig, <span class="at">directed=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>diam <span class="ot">&lt;-</span> <span class="fu">get_diameter</span>(encounters.ig, <span class="at">directed=</span>T)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>diam</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+ 15/308 vertices, named, from 5d1ed35:
 [1] Aubrey96 Emard19       Gino587 Vandervort697  Jettie913 Rodriguez71 
 [4] Dortha70 Rutherford999 Anderson154 Lemke654   Johnnie679 Hand679    
 [7] Ted955 Reilly981       Sabine292 Feil794      Gino587 Block661      
[10] Rosamaria757 Orn563    Cortez851 Price929     Nelida367 Emard19     
[13] Chantell995 Krajcik437 Kandis954 Koepp521     Annelle169 Schmidt332 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(diam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "igraph.vs"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(diam)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 161  24 145  19 143  31  95  71 261  66 120  57 188  35 187</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>vcol <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"gray40"</span>, <span class="fu">vcount</span>(encounters.ig))</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>vcol[diam] <span class="ot">&lt;-</span> <span class="st">"gold"</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>ecol <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="st">"gray80"</span>, <span class="fu">ecount</span>(encounters.ig))</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>ecol[<span class="fu">E</span>(encounters.ig, <span class="at">path=</span>diam)] <span class="ot">&lt;-</span> <span class="st">"orange"</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># E(encounters.ig, path=diam) finds edges along a path, here 'diam'</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(encounters.ig, <span class="at">vertex.color=</span>vcol,  <span class="at">vertex.label =</span> <span class="cn">NA</span>,      <span class="at">vertex.label.dist =</span> <span class="dv">2</span>, </span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.size =</span> <span class="dv">3</span>, <span class="at">vertex.label.cex =</span> <span class="fl">0.2</span>, <span class="at">edge.color=</span>ecol, <span class="at">vertex.name =</span> <span class="cn">NA</span>, <span class="at">edge.arrow.mode=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>#deg &lt;- degree(encounters.ig, mode=“all”)</p>
<p>#hist(deg, breaks=1:vcount(encounters.ig)-1, main=“Histogram of node degree”)</p>
<p>#deg.dist &lt;- degree_distribution(encounters.ig, cumulative=T, mode=“all”)</p>
<p>#plot( x=0:max(deg), y=1-deg.dist, pch=19, cex=1.2, col=“orange”,</p>
<pre><code> # xlab="Degree", ylab="Cumulative Frequency")</code></pre>
<p>#degree(encounters.ig, mode=“in”)</p>
<p>centr_degree(encounters.ig, mode=“in”, normalized=T)</p>
<p>#closeness(encounters.ig, mode=“all”, weights=NA)</p>
<p>centr_clo(encounters.ig, mode=“all”, normalized=T)</p>
<p>eigen_centrality(encounters.ig, directed=F, weights=NA)</p>
<p>centr_eigen(encounters.ig, directed=F, normalized=T)</p>
<p>betweenness(encounters.ig, directed=F, weights=NA)</p>
<p>edge_betweenness(encounters.ig, directed=F, weights=NA)</p>
<p>centr_betw(encounters.ig, directed=F, normalized=T)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>hs <span class="ot">&lt;-</span> <span class="fu">hub_score</span>(encounters.ig, <span class="at">weights=</span><span class="cn">NA</span>)<span class="sc">$</span>vector</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>as <span class="ot">&lt;-</span> <span class="fu">authority_score</span>(encounters.ig, <span class="at">weights=</span><span class="cn">NA</span>)<span class="sc">$</span>vector</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(encounters.ig,  <span class="at">vertex.label =</span> <span class="cn">NA</span>,      <span class="at">vertex.label.dist =</span> <span class="dv">2</span>, </span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>     <span class="at">vertex.label.cex =</span> <span class="fl">0.2</span>,<span class="at">vertex.size=</span>hs<span class="sc">*</span><span class="dv">50</span>, <span class="at">main=</span><span class="st">"Hubs"</span>)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(encounters.ig,  <span class="at">vertex.label =</span> <span class="cn">NA</span>,      <span class="at">vertex.label.dist =</span> <span class="dv">2</span>, </span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>   <span class="at">vertex.label.cex =</span> <span class="fl">0.2</span>,<span class="at">vertex.size=</span>as<span class="sc">*</span><span class="dv">30</span>, <span class="at">main=</span><span class="st">"Authorities"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">mean_distance</span>(encounters.ig, <span class="at">directed=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6.160216</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">#distances(encounters.ig) # with edge weights</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">#distances(encounters.ig, weights=NA) # ignore weights</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>kc <span class="ot">&lt;-</span> <span class="fu">coreness</span>(encounters.ig, <span class="at">mode=</span><span class="st">"all"</span>)</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(encounters.ig, <span class="at">vertex.size=</span>kc<span class="sc">*</span><span class="dv">6</span>, <span class="at">vertex.label=</span>kc, <span class="at">vertex.color=</span>kc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post_9_drug_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate assortativity</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">assortativity_degree</span>(encounters.ig, <span class="at">directed=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.007701883</code></pre>
</div>
</div>
<p>assortativity_degree() checks assortativity in node degrees</p>
</section>
<section id="create-gender-matrix" class="level1">
<h1>Create Gender Matrix</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> attributes <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(NAME, GENDER) </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 308 × 2
   NAME                   GENDER
   &lt;chr&gt;                  &lt;chr&gt; 
 1 Annice210 Gleason633   Female
 2 Julianne852 Barrows492 Female
 3 Alesha810 Heaney114    Female
 4 Sandee884 Rice937      Female
 5 Mia349 Runte676        Female
 6 Damian46 Dach178       Male  
 7 Nelida367 Emard19      Female
 8 Anthony633 Kutch271    Male  
 9 Mose244 Cummerata161   Male  
10 Shila857 Heller342     Female
# ℹ 298 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first create a matrix</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>gender.m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">nrow =</span> <span class="fu">nrow</span>(gender),</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">ncol =</span> <span class="fu">nrow</span>(gender))</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gender.m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 308 308</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gender)){</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(gender)){</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    gender.m[i, j] <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(gender<span class="sc">$</span>GENDER[i] <span class="sc">==</span> gender<span class="sc">$</span>GENDER[j], <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(gender.m) <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(gender.m) <span class="ot">&lt;-</span> gender<span class="sc">$</span>NAME</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(gender.m) <span class="ot">&lt;-</span> gender<span class="sc">$</span>NAME</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>gender.m + 2*encounters.m</p>
<p>The above code doesn’t work - but I think this would give the graph I want?</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>