{
  "hash": "409bb818f10f9f8e6c8a5fe23bf5901a",
  "result": {
    "markdown": "---\ntitle: \"The Patient Provider Relationship, A Synthetic Social Network\"\nsubtitle: \"Network Exploration\"\nauthor: \"Sue-Ellen Duffy\"\ndate: \"2024-04-21\"\ncategories: [code, analysis]\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(igraph)\nlibrary(sna)\nlibrary(ggplot2)\nlibrary(patchwork)\n```\n:::\n\n\nThis post will explore the Synthetic Mass network data in more detail.\n\n# Read in Data\n\n::: {.cell}\n\n```{.r .cell-code}\npat_attr <- read_csv(\"post_one_data/pat_attr.csv\", \n    col_types = cols(...1 = col_skip()))\npro_attr <- read_csv(\"post_one_data/pro_attr.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_cleaning <- read_csv(\"post_one_data//encounters_cleaning.csv\", \n    col_types = cols(...1 = col_skip()))\nencounter_attributes <- read_csv(\"post_one_data/encounter_attributes.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_el  <- read_csv(\"post_one_data/encounters_el.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_st_3 <- read_csv(\"post_one_data/encounters.st.3.csv\", \n    col_types = cols(...1 = col_skip()))\nattribute_list <- read.csv(\"post_one_data/attribute_list.csv\")\n```\n:::\n\n# Prep Data for Analysis\n\n::: {.cell}\n\n```{.r .cell-code}\n#combine pro and pat attr\npat_attr$type <- \"PATIENT\"\npro_attr$type <- \"PROVIDER\"\nboth_attr <- bind_rows(pat_attr, pro_attr)\nhead(both_attr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 Ã— 7\n  NAME                       GENDER RACE  MARITAL INCOME   AGE type   \n  <chr>                      <chr>  <chr> <chr>    <dbl> <dbl> <chr>  \n1 Avril120 Olson653          F      white <NA>    482269    36 PATIENT\n2 Norma469 Langosh790        F      white <NA>    190464    25 PATIENT\n3 Peggie783 Eichmann909      F      white <NA>     78997    21 PATIENT\n4 Ashlie138 Williamson769    F      white M         6472    37 PATIENT\n5 Christiane220 Ankunding277 F      white <NA>    141475    24 PATIENT\n6 Dione665 O'Kon634          F      white M       482269    36 PATIENT\n```\n:::\n:::\n\n\n# Create bipartite network with attributes\n\n::: {.cell}\n\n```{.r .cell-code}\nencounters.st.3 <- network(encounters_el,\n                         directed = FALSE,\n                         bipartite = TRUE,\n                         matrix.type = \"edgelist\",\n                         vertex.attr = attribute_list)\nencounters.st.3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n Network attributes:\n  vertices = 374 \n  directed = FALSE \n  hyper = FALSE \n  loops = FALSE \n  multiple = FALSE \n  bipartite = 121 \n  total edges= 437 \n    missing edges= 0 \n    non-missing edges= 437 \n\n Vertex attribute names: \n    AGE GENDER INCOME MARITAL NAME RACE type vertex.names X \n\n Edge attribute names: \n    COUNT \n```\n:::\n\n```{.r .cell-code}\nhead(network.vertex.names( encounters.st.3))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Akiko835 Larkin917\"      \"Anneliese170 Berge125\"  \n[3] \"Annice210 McClure239\"    \"Anthony633 Renner328\"   \n[5] \"Arleen939 Kling921\"      \"Ashlie138 Williamson769\"\n```\n:::\n:::\n\n# Graphs\n## Graphs with sna\n\n::: {.cell}\n\n```{.r .cell-code}\n# load the sna library to get the gplot() function\nlibrary( sna )\n\n# set the seed to reproduce the plot layout\nset.seed( 507 )\n\n# execute the plot\ngplot(\n  encounters.st.3,             \n  gmode = \"twomode\",                     # indicate it is two modes\n  usearrows = FALSE,                     # turn off the arrowheads\n  vertex.cex=2,                          # size the nodes     \n  label.cex=1.2,                         # size the labels\n  main=\"Bipartite Graph of Encounters using SNA\"                 # add a title\n)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nincidence_graph <- graph_from_biadjacency_matrix(encounters.st.3)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndetach(\"package:sna\")\n```\n:::\n\n\n## Graphs with igraph\n\n::: {.cell}\n\n```{.r .cell-code}\nvertex_colors <- ifelse(attribute_list$GENDER == \"F\", \"blue\", \"magenta\")\nV(incidence_graph)$shape <- ifelse(V(incidence_graph)$type, \"square\", \"circle\")\n\n# Define edge colors based on COUNT attribute\nedge_colors <- ifelse(encounters_el$COUNT < 5, \"yellow\", \n                      ifelse(encounters_el$COUNT >= 5 & encounters_el$COUNT <= 19, \"lightblue\", \"red\"))\n\n# Check if the length of edge_colors matches the number of edges\nif (length(edge_colors) == ecount(incidence_graph)) {\n  # Set edge attributes based on counts\n  E(incidence_graph)$color <- edge_colors\n} else {\n  print(\"Length of edge_colors does not match the number of edges in the graph.\")\n}\n\nE(incidence_graph)$color <- edge_colors\n\n# set the seed to reproduce the plot layout\nset.seed( 235 )\n\nplot(incidence_graph,\n     layout = layout.fruchterman.reingold, \n     vertex.label.dist = 2, \n     vertex.size = 3, \n     vertex.color = vertex_colors,\n     edge.label = NA,\n     vertex.label = NA,\n     vertex.label.cex = 0.2, \n     main = \"Patient Provider Incidence Graph\")\n# Define legend for vertex colors\nlegend(\"bottomright\",\n       legend = c(\"Female\", \"Male\"),  # You can customize these labels\n       fill = c(\"magenta\", \"blue\"),   # Fill colors corresponding to vertex colors\n       title = \"Nodes: Gender\")              # Legend title\n\n# Define legend for vertex shapes\nlegend(\"topright\",\n       legend = c(\"Patient\", \"Provider\"),  # You can customize these labels\n       pch = c(1, 0),                      # Point shapes corresponding to vertex shapes\n       title = \"Nodes: Who\")                     # Legend title\n\n# Define legend for edge colors\nlegend(\"topleft\",\n       legend = c(\"1-4\", \"5-19\", \"20+\"),  # You can customize these labels\n       col = c(\"yellow\", \"lightblue\", \"red\"),  # Line colors corresponding to edge colors\n       lwd = 2,                            # Line width\n       title = \"Edges: # of Visits\")              # Legend title\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#Calculating centrality\ntypes <- V(incidence_graph)$type\ndeg<- degree(incidence_graph)\n\nbet <- betweenness(incidence_graph)\nclos <- closeness(incidence_graph)\neig <- eigen_centrality(incidence_graph)$vector\nconst <- constraint(incidence_graph)\ncent_df <- data.frame(types, deg, bet, clos, eig, const)\nhead(cent_df[order(cent_df$deg, decreasing = TRUE),], 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                           types deg        bet         clos        eig\nTed955 Reilly981            TRUE  28 27013.6588 0.0012239902 1.00000000\nTimmy68 Nolan344           FALSE   7   885.6299 0.0007002801 0.02480592\nTrula820 Johns824          FALSE   7  6649.9824 0.0010000000 0.20635920\nChun678 Hirthe744          FALSE   6  1404.0134 0.0009578544 0.24432907\nCorey514 Gaylord332        FALSE   6  2402.5000 0.0009578544 0.19651997\nDennis979 Dickens475       FALSE   6  1785.4929 0.0009652510 0.22004854\nEnola75 Tromp100           FALSE   6   758.6271 0.0009560229 0.29716393\nJacqualine965 Aufderhar910 FALSE   6  3265.0333 0.0010080645 0.22137300\nJed345 Muller251           FALSE   6  3019.5333 0.0010080645 0.22693121\nMamie949 Leannon79         FALSE   6   799.1374 0.0009560229 0.28361363\n                                const\nTed955 Reilly981           0.03571429\nTimmy68 Nolan344           0.14285714\nTrula820 Johns824          0.14285714\nChun678 Hirthe744          0.16666667\nCorey514 Gaylord332        0.16666667\nDennis979 Dickens475       0.16666667\nEnola75 Tromp100           0.16666667\nJacqualine965 Aufderhar910 0.16666667\nJed345 Muller251           0.16666667\nMamie949 Leannon79         0.16666667\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nV(incidence_graph)$size <- degree(incidence_graph)\n\n# set the seed to reproduce the plot layout\nset.seed( 235 )\n\nplot(incidence_graph, \n     layout = layout.fruchterman.reingold, \n     vertex.color = vertex_colors,\n     edge.color = \"gray\",\n     edge.label = NA,\n     vertex.label = NA,\n     main = \"Patient Provider Incidence Graph with Degree Information\")\n# Define legend for vertex colors\nlegend(\"bottomright\",\n       legend = c(\"Female\", \"Male\"),  # You can customize these labels\n       fill = c(\"magenta\", \"blue\"),   # Fill colors corresponding to vertex colors\n       title = \"Nodes: Gender\")              # Legend title\n\n# Define legend for vertex shapes\nlegend(\"topright\",\n       legend = c(\"Patient\", \"Provider\"),  # You can customize these labels\n       pch = c(1, 0),                      # Point shapes corresponding to vertex shapes\n       title = \"Nodes: Who\")                     # Legend title\n\n# Define legend for edge colors\nlegend(\"topleft\", \n       legend = \"Vertex Size\", \n       pch = 1, \n       pt.cex = seq(0.5, 3, length.out = 5), \n       title = \"Degree\")\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\nHere we can see there is one Provider that sees the most patients, with degree centrality = 28. \nThe next largest degree centrality are in the 5 to 7 range and the majority of those nodes are patients.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nV(incidence_graph)$size <- closeness(incidence_graph)\n\n# set the seed to reproduce the plot layout\nset.seed( 235 )\n\nplot(incidence_graph, \n     layout = layout.fruchterman.reingold, \n     vertex.color = vertex_colors,\n     edge.color = \"gray\",\n     edge.label = NA,\n     vertex.label = NA,\n     main = \"Patient Provider Incidence Graph with Closeness Information\")\n# Define legend for vertex colors\nlegend(\"bottomright\",\n       legend = c(\"Female\", \"Male\"),  # You can customize these labels\n       fill = c(\"magenta\", \"blue\"),   # Fill colors corresponding to vertex colors\n       title = \"Nodes: Gender\")              # Legend title\n\n# Define legend for vertex shapes\nlegend(\"topright\",\n       legend = c(\"Patient\", \"Provider\"),  # You can customize these labels\n       pch = c(1, 0),                      # Point shapes corresponding to vertex shapes\n       title = \"Nodes: Who\")                     # Legend title\n\n# Define legend for edge colors\nlegend(\"topleft\", \n       legend = \"Vertex Size\", \n       pch = 1, \n       pt.cex = seq(0.5, 3, length.out = 5), \n       title = \"Closeness\")\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\nHere we see two of the dyads on the outer right side of this incidence graph have the largest closeness score. This is because their network is complete (they are both connected to one another).\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntriads_incidence<-igraph::triad_census(incidence_graph)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in igraph::triad_census(incidence_graph): At\nvendor/cigraph/src/misc/motifs.c:1140 : Triad census called on an undirected\ngraph. All connections will be treated as mutual.\n```\n:::\n\n```{.r .cell-code}\ntriads_incidence\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 8487860       0  159964       0       0       0       0       0       0\n[10]       0    1300       0       0       0       0       0\n```\n:::\n\n```{.r .cell-code}\nigraph::dyad.census(incidence_graph)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `dyad.census()` was deprecated in igraph 2.0.0.\nâ„¹ Please use `dyad_census()` instead.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `dyad_census()` requires a directed graph.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n$mut\n[1] 437\n\n$asym\n[1] 0\n\n$null\n[1] 69314\n```\n:::\n\n```{.r .cell-code}\ntransitivity(incidence_graph)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\ntransitivity(incidence_graph, type = \"global\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\naverage.path.length(incidence_graph)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `average.path.length()` was deprecated in igraph 2.0.0.\nâ„¹ Please use `mean_distance()` instead.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6.166661\n```\n:::\n:::\n\n\nComponent Structure and Membership\n\nFirst, let's look at the network component structure. This gives a list with: membership by node, size of each component, and the total number of components.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(igraph::components(incidence_graph))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"membership\" \"csize\"      \"no\"        \n```\n:::\n\n```{.r .cell-code}\nigraph::components(incidence_graph)$no # number of components\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 22\n```\n:::\n\n```{.r .cell-code}\nigraph::components(incidence_graph)$csize #Size of each component\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 249   8  18   4   6  10   3   5   3   4   5   9   6   7   2   3   5  10   7\n[20]   3   5   2\n```\n:::\n\n```{.r .cell-code}\ndegree.wt=igraph::strength(incidence_graph)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglou <- graph_from_data_frame(encounters_el[, 1:2], directed = FALSE)\nlou <- cluster_louvain(glou)\nset.seed(1)\nplot(lou, glou, vertex.label = NA, vertex.size=2)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(lou, glou, vertex.label = NA, vertex.size=5, mark.groups = NULL)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-14-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(lou, glou, vertex.label = NA, vertex.size = 5, mark.border = NA)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-14-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglou <- graph_from_data_frame(encounters_el[, 1:2], directed = FALSE)\nwalktrap <- cluster_leading_eigen(glou)\nset.seed(1)\nplot(walktrap, glou, vertex.label = NA, vertex.size=2)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(walktrap, glou, vertex.label = NA, vertex.size=5, mark.groups = NULL)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-15-2.png){width=672}\n:::\n\n```{.r .cell-code}\nplot(walktrap, glou, vertex.label = NA, vertex.size = 5, mark.border = NA)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-15-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprojected_graph <- bipartite_projection(incidence_graph)\n#providers\nhead(projected_graph$proj2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n6 x 253 sparse Matrix of class \"dgCMatrix\"\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n  [[ suppressing 253 column names 'Emilio417 Barton704', 'Frederic454 Larkin917', 'Jim478 Goyette777' ... ]]\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                                               \nEmilio417 Barton704   . 1 1 1 1 . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 1 . 1 2 1 . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     1 1 . 1 1 . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  1 2 1 . 1 . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      1 1 1 1 . . . . 1 2 . . 1 2 1 1 1 1 . 1 . . . . . 1 . . 3\nAlthea11 Ankunding277 . . . . . . 1 1 . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      . . 2 . . . . . . 2 . . . 1 . . . 1 1 . . . . . . . . . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      . . . 1 1 5 1 2 1 . 1 1 1 1 . . 1 2 . 2 1 1 2 2 . 1 . . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      . . 1 . 1 . . . 1 1 4 2 3 . . . . . . 3 . 1 1 1 1 . . . 1\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      1 1 1 1 1 . . 1 1 1 1 1 1 1 2 2 1 . . . 1 . . . . . . . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . 1 . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . 1 . . . . . . . . . . . . . . . . . . . . . . 1 .\nTed955 Reilly981      . . . 1 2 1 1 . . . . . . . . . 1 1 1 1 1 1 . . . . . . 1\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      . . . . . . . . . . . . . . . . . . . . . . . . . . 1 . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nTed955 Reilly981      . . . . 1 . . . . . . . . . . . . . . . . . . . . . . . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                               \nEmilio417 Barton704   . . . . . . . . . . . . . . . . . . . . .\nFrederic454 Larkin917 . . . . . . . . . . . . . . . 1 . . . . .\nJim478 Goyette777     . . . . . . . . . . . . . . . . . . . . .\nKirby843 McKenzie376  . . . . . . . . . . . . . . . 1 . . . . .\nTed955 Reilly981      1 . . . . . . . 1 1 . . . 1 . . . . . . .\nAlthea11 Ankunding277 . . . . . . . . . . . . . . . . . . . . .\n```\n:::\n\n```{.r .cell-code}\nprovider_communities <- cluster_louvain(projected_graph$proj2)\nprovider_membership <- membership(provider_communities)\nprint(provider_membership)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        Emilio417 Barton704       Frederic454 Larkin917 \n                          1                           1 \n          Jim478 Goyette777        Kirby843 McKenzie376 \n                          1                           1 \n           Ted955 Reilly981       Althea11 Ankunding277 \n                          1                           2 \n         Jerrell6 Rippin620         Linette249 Runte676 \n                          2                           2 \n          Irene779 Garza151       Randy380 Bergstrom287 \n                          3                           3 \n        Booker670 Casper496       Brock407 VonRueden376 \n                          4                           4 \n          Chang901 Kutch271         Caroline183 Lang846 \n                          4                           5 \n       Lyndon118 Trantow673         Monte325 Parisian75 \n                          5                           5 \n        Rhett759 Padberg411       Cira533 Jakubowski832 \n                          5                           6 \n         Dion244 Sanford861           Kyoko885 Price929 \n                          6                           7 \n      Pamelia915 Kilback373         Laverna97 Rippin620 \n                          6                           7 \n           Lynsey2 Lemke654      Marshall526 Jenkins714 \n                          7                           7 \n         Neville893 Schoen8       Patrina117 Strosin214 \n                          7                           7 \n       Beatriz277 Monroy712         Velda682 Gutmann970 \n                          6                           6 \n    Yesenia104 Wilderman619     Bettina657 Marquardt819 \n                          6                           5 \n         Mickey576 Borer986        Hellen346 Roberts511 \n                          5                           5 \n         Ricky354 Renner328             Cira533 Hane680 \n                          5                           8 \n  Luvenia178 Breitenberg711   Precious140 Runolfsson901 \n                          8                           8 \n    Archie818 McCullough561      Elmer371 Gusikowski974 \n                          6                           6 \n     Floy720 Greenfelder433     Barbara209 Maldonado119 \n                          6                           9 \n          Silvia880 Howe413          Zackary401 Mohr916 \n                          9                           9 \n        Cristi782 Leannon79           Elvin140 Marks830 \n                          7                           7 \n        Mariano761 Pagan507        Sharilyn202 Wolff180 \n                          7                           6 \n           Karey608 Torp761          Waylon572 Lakin515 \n                          6                           6 \n             Chris95 Kub800    Winston220 McCullough561 \n                          3                           3 \n      Marisol435 Cedillo160     Merrilee429 Daugherty69 \n                          6                           6 \n         Chad48 Weissnat378         Maryann106 Hintz995 \n                         10                          10 \n        Joanna347 Abbott774            Lita714 White193 \n                         11                          11 \n     Madelaine318 Walker122          Robert854 Klein929 \n                         11                          11 \n       Julio255 Calvillo618   Kristopher775 Schiller186 \n                          2                           2 \n      Tereasa291 Mueller846        Jeromy156 Okuneva707 \n                          2                           1 \n        JerÃ³nimo599 Alba338           Paulene52 Kihn564 \n                          1                           1 \n       Sheldon401 Hoeger474    Violette536 Halvorson124 \n                          1                           1 \n           Sam879 Rippin620       Shaquita282 Graham902 \n                         12                          12 \n        Colin861 Witting912         Freeda113 Crooks415 \n                         12                          12 \n          Landon622 Kihn564     Obdulia648 Schroeder447 \n                         12                          12 \n         Jessie665 Pagac496      Tynisha348 Bogisich202 \n                          5                           5 \n         Lamar193 Daniel959           Vito638 Barton704 \n                          6                           6 \n      Verda448 Bahringer146     Alta896 Pfannerstill264 \n                          1                           5 \n      Eustolia154 Paucek755        Jacque955 Streich926 \n                          5                           5 \n       Eliseo499 Reinger292         Michel472 Zulauf375 \n                          1                           1 \n        Greta919 Reinger292         Paris331 Ruecker817 \n                          7                           7 \n       Rutha66 Bergstrom287       Mozell819 Prohaska837 \n                          7                           3 \n        Walton167 Turner526        Boris111 Romaguera67 \n                          3                          13 \n         Tracie996 Lesch175           Burton124 Schoen8 \n                         13                          14 \n         Jean712 Koelpin146        Quentin28 Fritsch593 \n                         14                          14 \n     Irina619 Stiedemann542           Johna806 Klein929 \n                          3                           3 \n          Orpha286 Marks830           Pedro316 Ozuna605 \n                          3                           5 \nMarÃ­a Soledad68 GonzÃ¡lez124        Pearline482 Pagac496 \n                          1                           1 \n       Refugio197 Crooks415     Rudolf736 Vandervort697 \n                          1                           1 \n          Duane703 Bosco882        Blanca837 Oquendo599 \n                          3                           8 \n        Nannie905 Mayert710        Roberto515 MacÃ­as944 \n                          8                           8 \n  Emerita401 Satterfield305           Rod343 Goyette777 \n                          8                           8 \n       Anderson154 Lemke654        Evangeline16 Howe413 \n                          3                           3 \n           Carla633 Cano735      Hermelinda327 Hyatt152 \n                          1                           1 \n  Mathilde204 Wintheiser220            Omer483 Koepp521 \n                          1                           6 \n        Kathi607 Hilpert278            Gerry91 Block661 \n                          8                          15 \n          Jack927 Rippin620     Abraham100 McDermott739 \n                         15                           4 \n         Carlton317 Koch169             Chris95 Haag279 \n                          4                           4 \n           Greg949 Hilll811          Dee580 Schuster709 \n                          4                          14 \n        Miyoko154 Paucek755        Eleni953 Franecki195 \n                         14                          16 \n    Mckinley734 Rodriguez71       Delicia67 Bernhard322 \n                         16                           3 \n     Lashanda692 Gutmann970        Robert854 Nicolas769 \n                          3                           3 \n       Terrence276 Kiehn525        Thomas756 Strosin214 \n                          1                           1 \n          Tyler508 Ferry570            Bea654 Daniel959 \n                          1                           3 \n         Damian46 Hansen121      Duncan491 Halvorson124 \n                          3                           3 \n    Shelli447 Schowalter414            Alvin56 Crona259 \n                          3                           4 \n      Elma843 McCullough561        Ilene33 Greenholt190 \n                          4                           4 \n          Ross213 Wisozk929         Shanita956 Wolff180 \n                          3                           3 \n         Caryl47 Bernier607          Ronald408 Huels583 \n                         17                          17 \n      Rosaria177 Volkman526           Amparo58 Hayes766 \n                         17                          18 \n       Blanche121 Bailey598           Lucien408 Howe413 \n                         18                          18 \n      Vella930 Ankunding277        Carson894 Krajcik437 \n                         18                           7 \n          Clora637 Pagac496         Jamal145 Stroman228 \n                          7                           7 \n       Donya787 Emmerich580           Lorie307 Grady603 \n                          1                           1 \n     Peter292 Cartwright189         Hyman89 Schmeler639 \n                          1                           1 \n         Malka46 Gerhold939           Moshe758 Stamm704 \n                          1                           1 \n      Eugenio846 Streich926         Imogene688 Braun514 \n                         19                          19 \n        Leland44 Bernier607           Abdul218 White193 \n                         19                          20 \n        Guillermo498 Fay398       Kellee902 Buckridge80 \n                         20                          20 \n       Ã“scar156 Zaragoza109       Olympia319 Bradtke547 \n                         20                           1 \n          Sallie654 Jast432      Valentine262 Leannon79 \n                          1                           1 \n      Antonette454 Tromp100            Leah288 Sauer652 \n                          1                           1 \n        Stella203 Hammes673         Ashlyn643 Lehner980 \n                          1                          21 \n        Jolie499 Parisian75       Reggie481 Kassulke119 \n                         21                          21 \n       Veronika907 Rogahn59           Henry768 Ebert178 \n                         21                           7 \n       Harlan808 Langosh790   Georgeanna785 Schulist381 \n                          1                           1 \n         Houston994 Funk324         Leonie332 Wunsch504 \n                          8                           8 \n       Araceli695 Willms744          Denis399 Kohler843 \n                         22                          22 \n     Vince741 Morissette863      Zachary28 Gleichner915 \n                         22                          23 \nDomonique463 Satterfield305            Jean712 Block661 \n                         11                          11 \n         Lady554 Kovacek682       January966 Roberts511 \n                         11                           8 \n          Amado512 Adams676     Victoria535 Delvalle807 \n                         24                          24 \n     Cleveland582 Kuphal363       Natividad796 Davis923 \n                         25                          25 \n         Shemeka786 Conn188         Vince741 Schmidt332 \n                         25                           7 \n        Erasmo545 Crooks415    Maricruz991 Considine820 \n                         26                          26 \n         Sharron285 Batz141          Clarence5 Hyatt152 \n                         26                          27 \n      Georgianne697 Howe413          Otis335 Dickens475 \n                         27                          27 \n        Zachery872 Pagac496      Benedict104 Barrows492 \n                         27                          20 \n     Charlena802 Lockman863           Shasta644 King743 \n                         20                          20 \n     Octavio643 Prosacco716           France571 Feil794 \n                          1                          28 \n     Margaret865 Reinger292      Majorie11 Bergstrom287 \n                         28                           3 \nMarÃ­a Eugenia578 RenterÃ­a94         Shella455 Reichel38 \n                          3                           3 \n     Georgetta870 Turner526           Nerissa37 Hahn503 \n                         26                           6 \n        Britt177 Schmitt836         Ferdinand55 Moen819 \n                          3                          19 \n      Lakenya863 Hilpert278        Mickey576 Gerlach374 \n                         19                          19 \n           Pablo44 SolÃ­s294        Hank686 Schneider199 \n                         19                          29 \n             Kai187 Mann644   Margene509 Schamberger479 \n                         29                          29 \n        Tyron580 Reinger292           Zachery872 Rau926 \n                         29                          15 \n       Brendan864 Cremin516         Lizeth852 Ernser583 \n                         22                          22 \n        Phillip440 Kunze215          Kandi717 Beahan375 \n                         12                           3 \n         Maxima831 Fahey393           Sulema841 Ryan260 \n                          3                           3 \n    Brooks264 Williamson769          Cathey606 Kiehn525 \n                          3                           3 \n    Sharyl439 Williamson769      Margarita164 Abbott774 \n                          3                           5 \n    Rosemarie149 Gutmann970         Anh979 Schroeder447 \n                          5                           6 \n     Leopoldo762 Keebler762         Jamie386 Krajcik437 \n                          6                           6 \n        Lincoln623 Block661       Ivonne773 Turcotte120 \n                          1                          19 \n       Nickolas58 Schumm995      Renato359 Kertzmann286 \n                         19                          19 \n    Fernande593 Mosciski958        Sunni15 Schroeder447 \n                          3                           1 \n            Andy346 Dare640       Carmelita854 Tromp100 \n                          7                           7 \n  JosÃ© MarÃ­a211 Carrasco324  Kathlene786 Satterfield305 \n                          7                           7 \n      Brian582 Cummerata161       Danelle47 Ondricka197 \n                         26                          26 \n         Delmer311 Nolan344         Matha641 Gerhold939 \n                         26                           4 \n         Elijah719 White193         Gisele901 Lehner980 \n                         27                           1 \n         Carolynn568 Von197            Wes853 Torphy630 \n                         19                          19 \n      Wilhemina814 Lesch175      Carroll471 Eichmann909 \n                         30                          10 \n          Elmer371 Kutch271 \n                         10 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#patients\nhead(projected_graph$proj1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n6 x 121 sparse Matrix of class \"dgCMatrix\"\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n  [[ suppressing 121 column names 'Akiko835 Larkin917', 'Anneliese170 Berge125', 'Annice210 McClure239' ... ]]\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n                                                                               \nAkiko835 Larkin917      . . 1 . 1 . . . . . . . . . . 1 . . . . . 1 . 1 . 1 . 1\nAnneliese170 Berge125   . . . . . . . . . . . . . . . . . . . . 1 . . . . . . .\nAnnice210 McClure239    1 . . . 1 . . . . . . . . . . 1 . . . . . 1 . 1 . 1 . 1\nAnthony633 Renner328    . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nArleen939 Kling921      1 . 1 . . . . . 2 1 . . . . . 1 . . . . . 1 . 1 1 1 . 2\nAshlie138 Williamson769 . . . . . . . . . . . . . . . 1 . . . . . . . . . . . .\n                                                                               \nAkiko835 Larkin917      1 . . . . . 1 1 . . . . . 1 . . . 1 . 1 . 1 1 1 . 1 . .\nAnneliese170 Berge125   . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nAnnice210 McClure239    1 . . . . . 1 1 . . . 1 . 1 . . . 1 . 1 . 2 1 1 . 1 . .\nAnthony633 Renner328    . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nArleen939 Kling921      1 . . . . . 1 1 . . . . . 1 . . . 1 . 1 . 1 1 1 . 1 . .\nAshlie138 Williamson769 . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n                                                                               \nAkiko835 Larkin917      . . 1 . . . . 1 1 1 . . . 1 1 . . . . . . . . . . . . .\nAnneliese170 Berge125   . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nAnnice210 McClure239    . . 1 . . . . 1 1 1 . . . . 1 . . . . . . . . . . . . .\nAnthony633 Renner328    . . . . . . . . . . . . 1 . . . . . . . . . . . . . . .\nArleen939 Kling921      . . 1 . . . . 1 1 1 . . . . 1 . . . . . . . . . . . . .\nAshlie138 Williamson769 . . . . . . . . . . . . . . . . . . . . . . . 1 . . . .\n                                                                               \nAkiko835 Larkin917      1 . . . . 1 . . . . . . . . . . . . . . . 1 . . . . . 1\nAnneliese170 Berge125   . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nAnnice210 McClure239    1 . . . . 1 . . . . . . . . . 1 . . . . . 1 . . . . . 1\nAnthony633 Renner328    . . . . . . . . . . . . . . . . . . . . . . . . . . . .\nArleen939 Kling921      1 . . . . 1 . . . . . . . . . . . . . . . 1 . . . . . 1\nAshlie138 Williamson769 . . . . . . . . . . . . . . . . . . . . . . . . . 1 . 1\n                                         \nAkiko835 Larkin917      . 1 . 2 . . . . .\nAnneliese170 Berge125   . . . . . . . . .\nAnnice210 McClure239    . 1 . . . . . . .\nAnthony633 Renner328    . 1 . . . . . . .\nArleen939 Kling921      . 1 . . 2 . . . .\nAshlie138 Williamson769 . . . . . . . . .\n```\n:::\n\n```{.r .cell-code}\npatient_communities <- cluster_louvain(projected_graph$proj1)\npatient_membership <- membership(patient_communities)\nprint(patient_membership)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n        Akiko835 Larkin917      Anneliese170 Berge125 \n                         1                          2 \n      Annice210 McClure239       Anthony633 Renner328 \n                         3                          1 \n        Arleen939 Kling921    Ashlie138 Williamson769 \n                         4                          5 \n         Avril120 Olson653          Basil991 Hilll811 \n                         5                          6 \n      Benjamin360 Hintz995     Brendan864 MacGyver246 \n                         4                          4 \n        Bula88 Prohaska837         Byron202 Rempel203 \n                         7                          6 \n       Carey440 Stroman228       Carin553 Kassulke119 \n                         8                          5 \n       Carol737 Watsica258      Casandra937 Grimes165 \n                         6                          6 \n        Cecille691 Mraz590         Cedrick207 King743 \n                         3                          6 \n          Chet188 Bruen238     Christeen33 Schmitt836 \n                         9                         10 \nChristiane220 Ankunding277          Chun678 Hirthe744 \n                         2                         11 \n         Clara183 Roque844        Corey514 Gaylord332 \n                        12                         12 \n   Damian46 Satterfield305         Daron260 Hudson301 \n                         4                          6 \n     Delmar187 Armstrong51       Dennis979 Dickens475 \n                        11                          4 \n         Devon268 Lakin515          Dione665 O'Kon634 \n                         1                          5 \n   Dominic463 Wilderman619       Donnetta255 Ratke343 \n                         3                         13 \n       Drucilla444 Yost751    Elliott563 Wilderman619 \n                        14                          3 \n    Emmanuel930 Effertz744           Enola75 Tromp100 \n                         4                         11 \n       Erika442 Schultz619           Evelia928 Kuhn96 \n                         3                          7 \n      Fabian647 Farrell962         Francis500 Koss676 \n                         7                          3 \n  Fredrick998 Wilkinson796          Garry927 Olson653 \n                         1                          1 \n   Garth972 Schamberger479          Gita759 Daniel959 \n                         6                          7 \n     Herlinda751 Wunsch504            Hollis7 Mraz590 \n                        15                          1 \n       Horace32 Wiegand701          Hunter736 Moen819 \n                        10                         14 \n       Isidro558 Grimes165 Jacqualine965 Aufderhar910 \n                        16                          3 \n            Jay242 Emard19           Jed345 Muller251 \n                         1                          3 \n        Jesusa437 Mayer370      Joaquin141 Roberts511 \n                         1                          3 \n    Johnetta529 Volkman526       Josiah310 Strosin214 \n                         3                         17 \n         Keira502 Hessel84        Keturah238 Doyle959 \n                        18                          5 \n        Korey682 Abbott774         Latrina689 Smith67 \n                         1                         11 \n            Leah288 Orn563      Leontine92 Schmidt332 \n                        11                         19 \n         Luanne915 Veum823     Malcolm243 Leuschke194 \n                        20                          1 \n        Malcom15 Harber290         Mamie949 Leannon79 \n                         1                         11 \n      Manuela585 JÃ¡quez824   Margarite168 Turcotte120 \n                        21                          5 \n    Margart214 Bogisich202        Meri607 Mosciski958 \n                         1                          1 \n        Meri607 Stracke611        Merle11 Baumbach677 \n                        11                          7 \n     Milo271 Vandervort697     Mirella222 Schinner682 \n                        22                         12 \n      Morris740 Ullrich385           Nathan164 Rau926 \n                        23                         10 \n     Nerissa37 Botsford977        NicolÃ¡s801 Rosas160 \n                         7                         24 \n     Nikita578 Predovic534          Noble66 Douglas31 \n                        25                          5 \n       Norma469 Langosh790         Onita767 Kemmer137 \n                        11                         26 \n         Paul232 Walker122      Peggie783 Eichmann909 \n                        27                         20 \n       Ramona980 O'Hara248         Ranee391 O'Keefe54 \n                        11                         21 \n          Regine404 Orn563         Retha410 Beatty507 \n                        28                          3 \n      Ricardo560 Ibarra303        Rocco842 Spencer878 \n                        26                          6 \n         Ronna740 Feeney44        Roselia779 Bauch723 \n                         3                          4 \n         Roxane435 Koss676    Russell422 Cummerata161 \n                        25                         19 \n      Ruthanne627 Fahey393           Sal878 Beahan375 \n                        29                         15 \n    Salvador46 Schuster709         Sammy219 Spinka232 \n                        22                         12 \n   Shanika235 McDermott739            Shira43 Mraz590 \n                         3                          3 \n      Shirley182 Durgan499    Steven797 Morissette863 \n                         3                          4 \n       Stormy472 Carter549         Susana117 Ochoa950 \n                         6                         19 \n       Susana117 Rivera179  Tabitha433 Stoltenberg489 \n                         6                          1 \n    Tatum703 Balistreri607          Tawny381 Hills818 \n                        19                          3 \n  Theodore876 Bechtelar572           Timmy68 Nolan344 \n                        11                          5 \n         Toney527 Crona259          Trula820 Johns824 \n                         5                          5 \n     Valentin929 O'Hara248  Valentine262 Wilderman619 \n                        26                          1 \n         Velia837 Price929         Vernon254 Yundt842 \n                        27                          1 \n       Vicente970 Towne435     Waylon572 McDermott739 \n                         4                         19 \n        Werner409 Boyer713        Wilfred787 Robel940 \n                        14                         30 \n       Williams176 Mraz590 \n                         9 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(projected_graph$proj1, vertex.color = membership(patient_communities),\n     vertex.label = NA, edge.arrow.size = 0.5)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(projected_graph$proj2, vertex.color = membership(provider_communities),\n     vertex.label = NA, edge.arrow.size = 0.5)\n```\n\n::: {.cell-output-display}\n![](post_2_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "post_2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}