{
  "hash": "b899bc6aef5bdb4eca0bdba88992f267",
  "result": {
    "markdown": "---\ntitle: \"POST 9\"\nsubtitle: \"mostly notes\"\nauthor: \"Sue-Ellen Duffy\"\ndate: \"2024-05-05\"\ncategories: [code, analysis, block_model]\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readr)\nlibrary(igraph)\nlibrary(sna)\nlibrary(intergraph)\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(tmap)\nlibrary(tigris)\nlibrary(stplanr)\n```\n:::\n\n\nThis post will explore the Synthetic Mass network data in more detail.\n\n# Read in Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\npat_attr <- read_csv(\"post5drug_data/pat_attr.csv\", \n    col_types = cols(...1 = col_skip()))\npro_attr <- read_csv(\"post5drug_data/pro_attr.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_cleaning <- read_csv(\"post5drug_data//encounters_cleaning.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_cleaned <- read_csv(\"post5drug_data//encounters_cleaned.csv\", \n    col_types = cols(...1 = col_skip()))\nencounter_attributes <- read_csv(\"post5drug_data/encounter_attributes.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_el  <- read_csv(\"post5drug_data/encounters_el.csv\", \n    col_types = cols(...1 = col_skip()))\nencounters_st_3 <- read_csv(\"post5drug_data/encounters.st.3.csv\", \n    col_types = cols(...1 = col_skip()))\nattribute_list <- read.csv(\"post5drug_data/attribute_list.csv\")\npat_blks6 <- readRDS(\"pat_blks6_results.rds\")\nprov_blks6 <- readRDS(\"prov_blks6_results.rds\")\n```\n:::\n\n\n# Create bipartite network with attributes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencounters.stat <- network(encounters_el,\n                         directed = FALSE,\n                         bipartite = TRUE,\n                         matrix.type = \"edgelist\",\n                         vertex.attr = attribute_list)\n\nencounters.ig <- graph_from_biadjacency_matrix(encounters.stat)\n\nattributes <- bind_rows(pat_attr, pro_attr)\n```\n:::\n\n\n# create an adjacency matrix using sna\n\n\n::: {.cell}\n\n```{.r .cell-code}\nencounters.sna <- network(as.matrix(encounters.stat), directed = F)\nencounters.m <- encounters.sna[,] # extract an adjacency matrix from the network object\n```\n:::\n\n\n# Matrix Multiplication - For Overlap Count\n\nCross-Product Method with manual matrix multiplication Multiply a two-mode matrix by its transpose to produce a one-mode network that reflects the ties between the nodes in one of the two modes\n\n\n::: {.cell}\n\n```{.r .cell-code}\npatient.m <- t(encounters.m) %*% encounters.m\ndiag(patient.m) <- 0\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprovider.m <-   encounters.m %*% t(encounters.m)\ndiag(provider.m) <- 0\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npatient.ig <- graph_from_adjacency_matrix(patient.m, \n                                        mode = \"undirected\", \n                                        weighted = TRUE)\npatient.ig\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nIGRAPH 5d3c26e UNW- 222 497 -- \n+ attr: name (v/c), weight (e/n)\n+ edges from 5d3c26e (vertex names):\n [1] Elijah719 White193--Fidel864 Swift555       \n [2] Elijah719 White193--Virgen207 Hyatt152      \n [3] Elijah719 White193--Zachery872 Pagac496     \n [4] Fidel864 Swift555 --Virgen207 Hyatt152      \n [5] Fidel864 Swift555 --Zachery872 Pagac496     \n [6] Fidel864 Swift555 --Emory494 Schuster709    \n [7] Fidel864 Swift555 --Sherwood961 Aufderhar910\n [8] Fidel864 Swift555 --Jess275 Gutmann970      \n+ ... omitted several edges\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprovider.ig <- graph_from_adjacency_matrix(provider.m, \n                                        mode = \"undirected\", \n                                        weighted = TRUE)\nprovider.ig\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nIGRAPH 5d42e38 UNW- 86 265 -- \n+ attr: name (v/c), weight (e/n)\n+ edges from 5d42e38 (vertex names):\n [1] Adam631 Hoppe518       --Alissa315 Altenwerth646\n [2] Adam631 Hoppe518       --Johnny786 Smith67      \n [3] Adam631 Hoppe518       --Mose244 Cummerata161   \n [4] Adam631 Hoppe518       --Tommy814 Miller503     \n [5] Alesha810 Heaney114    --Anthony633 Kutch271    \n [6] Alissa315 Altenwerth646--Esther279 Schroeder447 \n [7] Alissa315 Altenwerth646--Gordon377 Marquardt819 \n [8] Alissa315 Altenwerth646--Guadalupe206 Wuckert783\n+ ... omitted several edges\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nE(patient.ig)$weight\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] 1 1 1 1 2 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 2 1 1 2 1 1 1 2\n [38] 1 1 1 1 1 1 2 4 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n [75] 1 1 1 1 1 1 1 1 1 1 3 2 2 1 1 1 2 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 3\n[112] 1 1 1 1 1 1 2 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 2 1 2\n[149] 1 1 1 1 2 1 1 2 1 1 1 1 1 1 1 2 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 2 2\n[186] 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 2 3 1 1\n[223] 1 1 1 1 1 1 1 2 1 1 1 1 1 1 2 1 2 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n[260] 1 2 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 2 1 1 1 1\n[297] 3 2 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n[334] 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 1 1 1 2 1 1 1\n[371] 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n[408] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n[445] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n[482] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nE(provider.ig)$weight\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  [1] 1 2 2 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 2\n [38] 1 1 2 1 1 1 1 1 1 1 1 1 3 1 1 1 1 4 2 1 1 3 2 1 1 1 2 1 1 1 1 2 1 1 2 1 2\n [75] 2 1 1 1 1 1 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1\n[112] 2 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 1 3 1 1 1 1 1 1 3 1 3\n[149] 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 3 1 2 3 1 1 1 1\n[186] 2 3 3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2\n[223] 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1\n[260] 1 1 1 1 1 3\n```\n:::\n:::\n\n\nSO providers it seems overlap with the same patients with the most being 4 times an overlap.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ade4) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'ade4' was built under R version 4.3.3\n```\n:::\n\n```{.r .cell-code}\ng <- graph_from_data_frame(encounters_cleaned, directed=FALSE)\nbipartite_matrix <- as_biadjacency_matrix(encounters.ig)  # Extract the matrix\n\npatient_jaccard <- dist.binary(bipartite_matrix, method=1, upper=TRUE, diag = FALSE) # Method #1 is \"Jaccard Index\"\nprovider_jaccard <- dist.binary(t(bipartite_matrix), method=1, upper=TRUE, diag = FALSE) \n\npatient_jaccard <- as.matrix(patient_jaccard)   \ndiag(patient_jaccard)<-0\n\n# women_jaccard          # Look at the matrix before you binarize\npatient_jaccard <- ifelse(patient_jaccard>0.95, 1, 0)     # Binarize\n\n# jaccard_women      # Take a look at the matrix if you like.\n\njacc_patient <- graph_from_adjacency_matrix(patient_jaccard,    # Create an igraph network\n                                        mode = \"undirected\")\nplot(jacc_patient,vertex.label = NA,      vertex.label.dist = 2, \n     vertex.size = 3, vertex.label.cex = 0.2,)\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npatient_correl <- cor(t(bipartite_matrix))\nprovider_correl <- cor(bipartite_matrix)\n\npatient_correl <- as.matrix(patient_correl)   \n# patient_correl          # Look at the matrix before you binarize\ncorrel_patient <- ifelse(patient_correl>0.6, 1, 0)    # Binarize \ndiag(correl_patient)<-0\n\ncorr_patient <- graph_from_adjacency_matrix(correl_patient, \n                                        mode = \"undirected\")\nplot(corr_patient,     vertex.label.dist = .5, \n     vertex.size = 3, vertex.label.cex = .8)\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(psych)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: package 'psych' was built under R version 4.3.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'psych'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:ggplot2':\n\n    %+%, alpha\n```\n:::\n\n```{.r .cell-code}\npatient_Q <-YuleCor(t(bipartite_matrix))$rho\nprovider_Q <-YuleCor(bipartite_matrix)$rho\n\npatient_Q <- as.matrix(patient_Q) \nhead(patient_Q, 10,10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n                        Adam631 Hoppe518 Alesha810 Heaney114\nAdam631 Hoppe518             0.999977634           0.2571596\nAlesha810 Heaney114          0.257159556           0.9999706\nAlissa315 Altenwerth646      0.921939729           0.2571596\nAnalisa263 Kohler843         0.120355835           0.2571596\nAnnice210 Gleason633         0.257159556           0.3843690\nAnthony633 Kutch271          0.257159556           0.9637365\nBenedict104 Hintz995         0.430178690           0.5386251\nCarl856 Rempel203            0.009474183           0.1504567\nChanell45 Morissette863      0.009474183           0.1504567\nChaya236 Sporer811           0.257159556           0.3843690\n                        Alissa315 Altenwerth646 Analisa263 Kohler843\nAdam631 Hoppe518                    0.921939729          0.120355835\nAlesha810 Heaney114                 0.257159556          0.257159556\nAlissa315 Altenwerth646             0.999977634          0.120355835\nAnalisa263 Kohler843                0.120355835          0.999977634\nAnnice210 Gleason633                0.257159556          0.257159556\nAnthony633 Kutch271                 0.257159556          0.257159556\nBenedict104 Hintz995                0.430178690          0.430178690\nCarl856 Rempel203                   0.009474183          0.009474183\nChanell45 Morissette863             0.009474183          0.009474183\nChaya236 Sporer811                  0.257159556          0.257159556\n                        Annice210 Gleason633 Anthony633 Kutch271\nAdam631 Hoppe518                   0.2571596           0.2571596\nAlesha810 Heaney114                0.3843690           0.9637365\nAlissa315 Altenwerth646            0.2571596           0.2571596\nAnalisa263 Kohler843               0.2571596           0.2571596\nAnnice210 Gleason633               0.9999706           0.3843690\nAnthony633 Kutch271                0.3843690           0.9999706\nBenedict104 Hintz995               0.5386251           0.5386251\nCarl856 Rempel203                  0.1504567           0.1504567\nChanell45 Morissette863            0.1504567           0.1504567\nChaya236 Sporer811                 0.3843690           0.3843690\n                        Benedict104 Hintz995 Carl856 Rempel203\nAdam631 Hoppe518                   0.4301787       0.009474183\nAlesha810 Heaney114                0.5386251       0.150456744\nAlissa315 Altenwerth646            0.4301787       0.009474183\nAnalisa263 Kohler843               0.4301787       0.009474183\nAnnice210 Gleason633               0.5386251       0.150456744\nAnthony633 Kutch271                0.5386251       0.150456744\nBenedict104 Hintz995               0.9999567       0.335195531\nCarl856 Rempel203                  0.3351955       0.999981937\nChanell45 Morissette863            0.3351955       0.866173075\nChaya236 Sporer811                 0.5386251       0.929777343\n                        Chanell45 Morissette863 Chaya236 Sporer811\nAdam631 Hoppe518                    0.009474183          0.2571596\nAlesha810 Heaney114                 0.150456744          0.3843690\nAlissa315 Altenwerth646             0.009474183          0.2571596\nAnalisa263 Kohler843                0.009474183          0.2571596\nAnnice210 Gleason633                0.150456744          0.3843690\nAnthony633 Kutch271                 0.150456744          0.3843690\nBenedict104 Hintz995                0.335195531          0.5386251\nCarl856 Rempel203                   0.866173075          0.9297773\nChanell45 Morissette863             0.999981937          0.9297773\nChaya236 Sporer811                  0.929777343          0.9999706\n                        Cherise743 Prosacco716 Cindi877 Hane680\nAdam631 Hoppe518                   0.009474183      0.009474183\nAlesha810 Heaney114                0.150456744      0.150456744\nAlissa315 Altenwerth646            0.009474183      0.009474183\nAnalisa263 Kohler843               0.009474183      0.897590847\nAnnice210 Gleason633               0.150456744      0.150456744\nAnthony633 Kutch271                0.150456744      0.150456744\nBenedict104 Hintz995               0.335195531      0.335195531\nCarl856 Rempel203                 -0.101651842     -0.101651842\nChanell45 Morissette863           -0.101651842     -0.101651842\nChaya236 Sporer811                 0.150456744      0.150456744\n                        Cruz300 Wilderman619 Damian46 Dach178 Diana207 Stamm704\nAdam631 Hoppe518                   0.1203558        0.4301787         0.2571596\nAlesha810 Heaney114                0.2571596        0.5386251         0.3843690\nAlissa315 Altenwerth646            0.1203558        0.4301787         0.2571596\nAnalisa263 Kohler843               0.1203558        0.4301787         0.2571596\nAnnice210 Gleason633               0.2571596        0.5386251         0.3843690\nAnthony633 Kutch271                0.2571596        0.5386251         0.3843690\nBenedict104 Hintz995               0.4301787        0.6636156         0.5386251\nCarl856 Rempel203                  0.8975908        0.3351955         0.1504567\nChanell45 Morissette863            0.9715857        0.3351955         0.1504567\nChaya236 Sporer811                 0.9466874        0.5386251         0.3843690\n                        Dinorah501 Bechtelar572 Donald774 Krajcik437\nAdam631 Hoppe518                    0.009474183            0.2571596\nAlesha810 Heaney114                 0.150456744            0.3843690\nAlissa315 Altenwerth646             0.009474183            0.2571596\nAnalisa263 Kohler843                0.009474183            0.2571596\nAnnice210 Gleason633                0.150456744            0.3843690\nAnthony633 Kutch271                 0.150456744            0.3843690\nBenedict104 Hintz995                0.335195531            0.5386251\nCarl856 Rempel203                  -0.101651842            0.1504567\nChanell45 Morissette863            -0.101651842            0.1504567\nChaya236 Sporer811                  0.150456744            0.3843690\n                        Dorothea248 Fritsch593 Dortha70 Rutherford999\nAdam631 Hoppe518                     0.1203558            0.120355835\nAlesha810 Heaney114                  0.2571596            0.257159556\nAlissa315 Altenwerth646              0.1203558            0.120355835\nAnalisa263 Kohler843                 0.1203558            0.120355835\nAnnice210 Gleason633                 0.2571596            0.257159556\nAnthony633 Kutch271                  0.2571596            0.257159556\nBenedict104 Hintz995                 0.4301787            0.430178690\nCarl856 Rempel203                    0.8975908            0.009474183\nChanell45 Morissette863              0.8975908            0.009474183\nChaya236 Sporer811                   0.9466874            0.257159556\n                        Dusti191 Maggio310 Elease461 Boehm581\nAdam631 Hoppe518               0.120355835        0.120355835\nAlesha810 Heaney114            0.257159556        0.257159556\nAlissa315 Altenwerth646        0.120355835        0.120355835\nAnalisa263 Kohler843           0.120355835        0.120355835\nAnnice210 Gleason633           0.257159556        0.257159556\nAnthony633 Kutch271            0.257159556        0.257159556\nBenedict104 Hintz995           0.430178690        0.430178690\nCarl856 Rempel203              0.009474183        0.009474183\nChanell45 Morissette863        0.009474183        0.009474183\nChaya236 Sporer811             0.257159556        0.257159556\n                        Esther279 Schroeder447 Everette494 O'Hara248\nAdam631 Hoppe518                   0.120355835             0.2571596\nAlesha810 Heaney114                0.257159556             0.3843690\nAlissa315 Altenwerth646            0.921939729             0.2571596\nAnalisa263 Kohler843               0.120355835             0.2571596\nAnnice210 Gleason633               0.257159556             0.3843690\nAnthony633 Kutch271                0.257159556             0.3843690\nBenedict104 Hintz995               0.430178690             0.5386251\nCarl856 Rempel203                  0.009474183             0.1504567\nChanell45 Morissette863            0.009474183             0.1504567\nChaya236 Sporer811                 0.257159556             0.3843690\n                        Gino587 Vandervort697 Gordon377 Marquardt819\nAdam631 Hoppe518                    0.2571596            -0.08221549\nAlesha810 Heaney114                 0.3843690             0.05967181\nAlissa315 Altenwerth646             0.2571596             0.87363120\nAnalisa263 Kohler843                0.2571596            -0.08221549\nAnnice210 Gleason633                0.3843690             0.05967181\nAnthony633 Kutch271                 0.3843690             0.05967181\nBenedict104 Hintz995                0.5386251             0.25131502\nCarl856 Rempel203                   0.1504567            -0.19149751\nChanell45 Morissette863             0.1504567            -0.19149751\nChaya236 Sporer811                  0.3843690             0.05967181\n                        Guadalupe206 Wuckert783 Gwen761 Keeling57\nAdam631 Hoppe518                    0.120355835         0.4301787\nAlesha810 Heaney114                 0.257159556         0.5386251\nAlissa315 Altenwerth646             0.921939729         0.4301787\nAnalisa263 Kohler843                0.120355835         0.4301787\nAnnice210 Gleason633                0.989917507         0.5386251\nAnthony633 Kutch271                 0.257159556         0.5386251\nBenedict104 Hintz995                0.430178690         0.6636156\nCarl856 Rempel203                   0.009474183         0.3351955\nChanell45 Morissette863             0.009474183         0.3351955\nChaya236 Sporer811                  0.257159556         0.5386251\n                        Ivan258 Hills818 Jeanelle736 Simonis280\nAdam631 Hoppe518             0.120355835              0.2571596\nAlesha810 Heaney114          0.257159556              0.3843690\nAlissa315 Altenwerth646      0.120355835              0.2571596\nAnalisa263 Kohler843         0.120355835              0.2571596\nAnnice210 Gleason633         0.257159556              0.3843690\nAnthony633 Kutch271          0.257159556              0.3843690\nBenedict104 Hintz995         0.430178690              0.5386251\nCarl856 Rempel203            0.009474183              0.1504567\nChanell45 Morissette863      0.009474183              0.1504567\nChaya236 Sporer811           0.257159556              0.3843690\n                        Jeanette800 Schinner682 Johnnie679 Hand679\nAdam631 Hoppe518                    0.120355835        0.120355835\nAlesha810 Heaney114                 0.257159556        0.257159556\nAlissa315 Altenwerth646             0.120355835        0.921939729\nAnalisa263 Kohler843                0.120355835        0.120355835\nAnnice210 Gleason633                0.257159556        0.257159556\nAnthony633 Kutch271                 0.257159556        0.257159556\nBenedict104 Hintz995                0.430178690        0.430178690\nCarl856 Rempel203                   0.009474183        0.009474183\nChanell45 Morissette863             0.009474183        0.009474183\nChaya236 Sporer811                  0.257159556        0.257159556\n                        Johnny786 Smith67 Jorge203 Ferry570\nAdam631 Hoppe518                0.9899175       0.120355835\nAlesha810 Heaney114             0.3843690       0.257159556\nAlissa315 Altenwerth646         0.9899175       0.921939729\nAnalisa263 Kohler843            0.2571596       0.120355835\nAnnice210 Gleason633            0.3843690       0.257159556\nAnthony633 Kutch271             0.3843690       0.257159556\nBenedict104 Hintz995            0.5386251       0.430178690\nCarl856 Rempel203               0.1504567       0.009474183\nChanell45 Morissette863         0.1504567       0.009474183\nChaya236 Sporer811              0.3843690       0.257159556\n                        Julianne852 Barrows492 Kandis954 Koepp521\nAdam631 Hoppe518                   0.120355835          0.2571596\nAlesha810 Heaney114                0.257159556          0.3843690\nAlissa315 Altenwerth646            0.120355835          0.2571596\nAnalisa263 Kohler843               0.120355835          0.2571596\nAnnice210 Gleason633               0.257159556          0.3843690\nAnthony633 Kutch271                0.257159556          0.3843690\nBenedict104 Hintz995               0.430178690          0.5386251\nCarl856 Rempel203                  0.009474183          0.1504567\nChanell45 Morissette863            0.009474183          0.1504567\nChaya236 Sporer811                 0.257159556          0.3843690\n                        Kathlyn335 Wisozk929 Kathrine376 Bosco882\nAdam631 Hoppe518                   0.2571596            0.2571596\nAlesha810 Heaney114                0.3843690            0.3843690\nAlissa315 Altenwerth646            0.2571596            0.2571596\nAnalisa263 Kohler843               0.2571596            0.2571596\nAnnice210 Gleason633               0.3843690            0.3843690\nAnthony633 Kutch271                0.3843690            0.3843690\nBenedict104 Hintz995               0.5386251            0.5386251\nCarl856 Rempel203                  0.1504567            0.1504567\nChanell45 Morissette863            0.1504567            0.1504567\nChaya236 Sporer811                 0.3843690            0.3843690\n                        Krystina167 Muller251 Lan153 Schmidt332 Lani848 Cole117\nAdam631 Hoppe518                    0.2571596       -0.08221549     0.120355835\nAlesha810 Heaney114                 0.3843690        0.05967181     0.257159556\nAlissa315 Altenwerth646             0.2571596       -0.08221549     0.921939729\nAnalisa263 Kohler843                0.2571596       -0.08221549     0.120355835\nAnnice210 Gleason633                0.3843690        0.05967181     0.257159556\nAnthony633 Kutch271                 0.3843690        0.05967181     0.257159556\nBenedict104 Hintz995                0.5386251        0.25131502     0.430178690\nCarl856 Rempel203                   0.1504567       -0.19149751     0.009474183\nChanell45 Morissette863             0.1504567       -0.19149751     0.009474183\nChaya236 Sporer811                  0.3843690        0.05967181     0.257159556\n                        Lawerence6 Grimes165 Leland44 Huels583\nAdam631 Hoppe518                 0.120355835         0.2571596\nAlesha810 Heaney114              0.257159556         0.3843690\nAlissa315 Altenwerth646          0.120355835         0.2571596\nAnalisa263 Kohler843             0.120355835         0.2571596\nAnnice210 Gleason633             0.257159556         0.3843690\nAnthony633 Kutch271              0.257159556         0.3843690\nBenedict104 Hintz995             0.430178690         0.5386251\nCarl856 Rempel203                0.009474183         0.1504567\nChanell45 Morissette863          0.009474183         0.1504567\nChaya236 Sporer811               0.257159556         0.3843690\n                        Lemuel304 Mante251 Leonel449 Witting912\nAdam631 Hoppe518               0.009474183          0.009474183\nAlesha810 Heaney114            0.150456744          0.150456744\nAlissa315 Altenwerth646        0.897590847          0.897590847\nAnalisa263 Kohler843           0.897590847          0.897590847\nAnnice210 Gleason633           0.150456744          0.150456744\nAnthony633 Kutch271            0.150456744          0.150456744\nBenedict104 Hintz995           0.335195531          0.335195531\nCarl856 Rempel203             -0.101651842         -0.101651842\nChanell45 Morissette863       -0.101651842         -0.101651842\nChaya236 Sporer811             0.150456744          0.150456744\n                        Lorina403 Cronin387 Lorretta561 Metz686\nAdam631 Hoppe518                  0.2571596           0.1203558\nAlesha810 Heaney114               0.3843690           0.2571596\nAlissa315 Altenwerth646           0.2571596           0.1203558\nAnalisa263 Kohler843              0.2571596           0.1203558\nAnnice210 Gleason633              0.3843690           0.2571596\nAnthony633 Kutch271               0.3843690           0.2571596\nBenedict104 Hintz995              0.5386251           0.4301787\nCarl856 Rempel203                 0.1504567           0.8975908\nChanell45 Morissette863           0.9297773           0.9715857\nChaya236 Sporer811                0.3843690           0.9466874\n                        Lou594 Krajcik437 Madelyn308 Schumm995\nAdam631 Hoppe518                0.2571596          0.009474183\nAlesha810 Heaney114             0.3843690          0.150456744\nAlissa315 Altenwerth646         0.2571596          0.897590847\nAnalisa263 Kohler843            0.2571596          0.009474183\nAnnice210 Gleason633            0.3843690          0.150456744\nAnthony633 Kutch271             0.3843690          0.150456744\nBenedict104 Hintz995            0.5386251          0.335195531\nCarl856 Rempel203               0.1504567         -0.101651842\nChanell45 Morissette863         0.1504567         -0.101651842\nChaya236 Sporer811              0.3843690          0.150456744\n                        Marcos263 Mills423 Margarito178 Schulist381\nAdam631 Hoppe518                 0.2571596              0.120355835\nAlesha810 Heaney114              0.3843690              0.257159556\nAlissa315 Altenwerth646          0.2571596              0.120355835\nAnalisa263 Kohler843             0.2571596              0.120355835\nAnnice210 Gleason633             0.3843690              0.257159556\nAnthony633 Kutch271              0.3843690              0.257159556\nBenedict104 Hintz995             0.5386251              0.999083410\nCarl856 Rempel203                0.1504567              0.009474183\nChanell45 Morissette863          0.1504567              0.009474183\nChaya236 Sporer811               0.3843690              0.257159556\n                        Mario764 Glover433 Maryellen651 Conn188 Mia349 Runte676\nAdam631 Hoppe518               0.009474183            0.2571596     0.120355835\nAlesha810 Heaney114            0.150456744            0.3843690     0.257159556\nAlissa315 Altenwerth646        0.897590847            0.9466874     0.120355835\nAnalisa263 Kohler843           0.009474183            0.2571596     0.120355835\nAnnice210 Gleason633           0.150456744            0.3843690     0.257159556\nAnthony633 Kutch271            0.150456744            0.3843690     0.257159556\nBenedict104 Hintz995           0.335195531            0.5386251     0.430178690\nCarl856 Rempel203             -0.101651842            0.1504567     0.009474183\nChanell45 Morissette863       -0.101651842            0.1504567     0.009474183\nChaya236 Sporer811             0.150456744            0.3843690     0.257159556\n                        Monroe732 Fritsch593 Mose244 Cummerata161\nAdam631 Hoppe518                   0.2571596          0.980751604\nAlesha810 Heaney114                0.3843690          0.257159556\nAlissa315 Altenwerth646            0.2571596          0.120355835\nAnalisa263 Kohler843               0.2571596          0.120355835\nAnnice210 Gleason633               0.3843690          0.257159556\nAnthony633 Kutch271                0.3843690          0.257159556\nBenedict104 Hintz995               0.5386251          0.430178690\nCarl856 Rempel203                  0.1504567          0.009474183\nChanell45 Morissette863            0.1504567          0.009474183\nChaya236 Sporer811                 0.3843690          0.257159556\n                        Mozelle144 Zboncak558 Nelida367 Emard19\nAdam631 Hoppe518                  0.120355835       0.120355835\nAlesha810 Heaney114               0.257159556       0.257159556\nAlissa315 Altenwerth646           0.120355835       0.120355835\nAnalisa263 Kohler843              0.120355835       0.120355835\nAnnice210 Gleason633              0.257159556       0.257159556\nAnthony633 Kutch271               0.257159556       0.257159556\nBenedict104 Hintz995              0.430178690       0.430178690\nCarl856 Rempel203                 0.009474183       0.009474183\nChanell45 Morissette863           0.009474183       0.009474183\nChaya236 Sporer811                0.257159556       0.257159556\n                        Odilia72 Upton904 Ola364 Kreiger457 Oliva247 Braun514\nAdam631 Hoppe518              0.120355835       0.120355835       0.120355835\nAlesha810 Heaney114           0.257159556       0.257159556       0.257159556\nAlissa315 Altenwerth646       0.120355835       0.120355835       0.120355835\nAnalisa263 Kohler843          0.120355835       0.120355835       0.120355835\nAnnice210 Gleason633          0.257159556       0.257159556       0.257159556\nAnthony633 Kutch271           0.257159556       0.257159556       0.257159556\nBenedict104 Hintz995          0.430178690       0.430178690       0.430178690\nCarl856 Rempel203             0.009474183       0.009474183       0.009474183\nChanell45 Morissette863       0.009474183       0.009474183       0.009474183\nChaya236 Sporer811            0.257159556       0.257159556       0.257159556\n                        Ouida808 Carroll471 Ramon749 Kozey370\nAdam631 Hoppe518                  0.2571596       -0.22500922\nAlesha810 Heaney114               0.3843690       -0.08654262\nAlissa315 Altenwerth646           0.2571596        0.82684289\nAnalisa263 Kohler843              0.2571596       -0.22500922\nAnnice210 Gleason633              0.3843690       -0.08654262\nAnthony633 Kutch271               0.3843690       -0.08654262\nBenedict104 Hintz995              0.5386251        0.10989011\nCarl856 Rempel203                 0.1504567        0.77626624\nChanell45 Morissette863           0.1504567        0.77626624\nChaya236 Sporer811                0.3843690        0.87986464\n                        Regan713 Kertzmann286 Rod343 Prosacco716\nAdam631 Hoppe518                  0.009474183          0.2571596\nAlesha810 Heaney114               0.150456744          0.3843690\nAlissa315 Altenwerth646           0.009474183          0.2571596\nAnalisa263 Kohler843              0.009474183          0.2571596\nAnnice210 Gleason633              0.150456744          0.3843690\nAnthony633 Kutch271               0.150456744          0.3843690\nBenedict104 Hintz995              0.335195531          0.5386251\nCarl856 Rempel203                -0.101651842          0.1504567\nChanell45 Morissette863          -0.101651842          0.1504567\nChaya236 Sporer811                0.150456744          0.3843690\n                        Rolland302 Kassulke119 Rosamaria757 Orn563\nAdam631 Hoppe518                   0.120355835         0.009474183\nAlesha810 Heaney114                0.257159556         0.150456744\nAlissa315 Altenwerth646            0.921939729         0.009474183\nAnalisa263 Kohler843               0.120355835         0.009474183\nAnnice210 Gleason633               0.257159556         0.150456744\nAnthony633 Kutch271                0.257159556         0.150456744\nBenedict104 Hintz995               0.430178690         0.335195531\nCarl856 Rempel203                  0.009474183        -0.101651842\nChanell45 Morissette863            0.009474183        -0.101651842\nChaya236 Sporer811                 0.257159556         0.150456744\n                        Rudy520 Hettinger594 Rupert654 Jenkins714\nAdam631 Hoppe518                 0.009474183          0.120355835\nAlesha810 Heaney114              0.150456744          0.257159556\nAlissa315 Altenwerth646          0.897590847          0.921939729\nAnalisa263 Kohler843             0.009474183          0.120355835\nAnnice210 Gleason633             0.150456744          0.257159556\nAnthony633 Kutch271              0.150456744          0.257159556\nBenedict104 Hintz995             0.335195531          0.430178690\nCarl856 Rempel203               -0.101651842          0.009474183\nChanell45 Morissette863         -0.101651842          0.009474183\nChaya236 Sporer811               0.150456744          0.257159556\n                        Russell422 Stracke611 Ryann170 Spencer878\nAdam631 Hoppe518                    0.2571596         0.009474183\nAlesha810 Heaney114                 0.3843690         0.150456744\nAlissa315 Altenwerth646             0.2571596         0.009474183\nAnalisa263 Kohler843                0.2571596         0.009474183\nAnnice210 Gleason633                0.3843690         0.150456744\nAnthony633 Kutch271                 0.3843690         0.150456744\nBenedict104 Hintz995                0.5386251         0.335195531\nCarl856 Rempel203                   0.1504567        -0.101651842\nChanell45 Morissette863             0.1504567        -0.101651842\nChaya236 Sporer811                  0.3843690         0.150456744\n                        Sabine292 Feil794 Sandee884 Rice937\nAdam631 Hoppe518              -0.15929908         0.2571596\nAlesha810 Heaney114           -0.01850995         0.3843690\nAlissa315 Altenwerth646        0.85005154         0.2571596\nAnalisa263 Kohler843          -0.15929908         0.2571596\nAnnice210 Gleason633          -0.01850995         0.3843690\nAnthony633 Kutch271           -0.01850995         0.3843690\nBenedict104 Hintz995           0.17669796         0.5386251\nCarl856 Rempel203             -0.26564138         0.1504567\nChanell45 Morissette863       -0.26564138         0.1504567\nChaya236 Sporer811            -0.01850995         0.3843690\n                        Serena400 Powlowski563 Shara355 Bruen238\nAdam631 Hoppe518                   0.009474183       0.120355835\nAlesha810 Heaney114                0.150456744       0.257159556\nAlissa315 Altenwerth646            0.009474183       0.120355835\nAnalisa263 Kohler843               0.009474183       0.120355835\nAnnice210 Gleason633               0.150456744       0.257159556\nAnthony633 Kutch271                0.150456744       0.257159556\nBenedict104 Hintz995               0.335195531       0.430178690\nCarl856 Rempel203                  0.866173075       0.009474183\nChanell45 Morissette863            0.866173075       0.009474183\nChaya236 Sporer811                 0.929777343       0.257159556\n                        Shila857 Heller342 Spencer878 Bailey598\nAdam631 Hoppe518               0.009474183            0.2571596\nAlesha810 Heaney114            0.150456744            0.3843690\nAlissa315 Altenwerth646        0.009474183            0.2571596\nAnalisa263 Kohler843           0.009474183            0.2571596\nAnnice210 Gleason633           0.150456744            0.3843690\nAnthony633 Kutch271            0.150456744            0.3843690\nBenedict104 Hintz995           0.335195531            0.5386251\nCarl856 Rempel203             -0.101651842            0.1504567\nChanell45 Morissette863       -0.101651842            0.1504567\nChaya236 Sporer811             0.150456744            0.3843690\n                        Stanley702 Cremin516 Stephan15 Auer97 Tera136 Swift555\nAdam631 Hoppe518                 -0.08221549        0.2571596      0.120355835\nAlesha810 Heaney114               0.05967181        0.3843690      0.257159556\nAlissa315 Altenwerth646          -0.08221549        0.2571596      0.120355835\nAnalisa263 Kohler843             -0.08221549        0.2571596      0.120355835\nAnnice210 Gleason633              0.05967181        0.3843690      0.257159556\nAnthony633 Kutch271               0.05967181        0.3843690      0.257159556\nBenedict104 Hintz995              0.25131502        0.5386251      0.430178690\nCarl856 Rempel203                -0.19149751        0.1504567      0.009474183\nChanell45 Morissette863          -0.19149751        0.1504567      0.009474183\nChaya236 Sporer811                0.05967181        0.3843690      0.257159556\n                        Theodore876 Thiel172 Tomika243 Walker122\nAdam631 Hoppe518                   0.1203558         -0.15929908\nAlesha810 Heaney114                0.2571596         -0.01850995\nAlissa315 Altenwerth646            0.1203558         -0.15929908\nAnalisa263 Kohler843               0.1203558         -0.15929908\nAnnice210 Gleason633               0.2571596         -0.01850995\nAnthony633 Kutch271                0.2571596         -0.01850995\nBenedict104 Hintz995               0.4301787          0.17669796\nCarl856 Rempel203                  0.8975908         -0.26564138\nChanell45 Morissette863            0.8975908         -0.26564138\nChaya236 Sporer811                 0.9466874         -0.01850995\n                        Tommy814 Miller503 Troy560 Kohler843\nAdam631 Hoppe518               0.921939729       0.120355835\nAlesha810 Heaney114            0.257159556       0.257159556\nAlissa315 Altenwerth646        0.120355835       0.120355835\nAnalisa263 Kohler843           0.120355835       0.120355835\nAnnice210 Gleason633           0.257159556       0.257159556\nAnthony633 Kutch271            0.257159556       0.257159556\nBenedict104 Hintz995           0.430178690       0.430178690\nCarl856 Rempel203              0.009474183       0.009474183\nChanell45 Morissette863        0.009474183       0.009474183\nChaya236 Sporer811             0.257159556       0.257159556\n                        Tyler508 Ankunding277 Wilburn655 Sipes176\nAdam631 Hoppe518                  0.120355835           0.4301787\nAlesha810 Heaney114               0.257159556           0.5386251\nAlissa315 Altenwerth646           0.120355835           0.4301787\nAnalisa263 Kohler843              0.120355835           0.4301787\nAnnice210 Gleason633              0.257159556           0.5386251\nAnthony633 Kutch271               0.257159556           0.5386251\nBenedict104 Hintz995              0.430178690           0.6636156\nCarl856 Rempel203                 0.009474183           0.3351955\nChanell45 Morissette863           0.009474183           0.3351955\nChaya236 Sporer811                0.257159556           0.5386251\n                        Wilfred787 Nienow652\nAdam631 Hoppe518                 0.120355835\nAlesha810 Heaney114              0.257159556\nAlissa315 Altenwerth646          0.120355835\nAnalisa263 Kohler843             0.120355835\nAnnice210 Gleason633             0.257159556\nAnthony633 Kutch271              0.257159556\nBenedict104 Hintz995             0.430178690\nCarl856 Rempel203                0.009474183\nChanell45 Morissette863          0.009474183\nChaya236 Sporer811               0.257159556\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nQ_patient <- ifelse(patient_Q>0.9, 1, 0) # Binarize\ndiag(Q_patient)<-0\n# Q_patient    # Take a look at the matrix\n\nYQ_patient <- graph_from_adjacency_matrix(Q_patient,     # Create an igraph network\n                                        mode = \"undirected\")\nplot(YQ_patient,   vertex.label.dist = 1, \n     vertex.size = 5, vertex.label.cex = .8, layout = layout_with_fr)\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlayouts <- grep(\"^layout_\", ls(\"package:igraph\"), value=TRUE)[-1] \n\n# Remove layouts that do not apply to our graph.\n\nlayouts <- layouts[!grepl(\"bipartite|merge|norm|sugiyama|tree\", layouts)]\n\npar(mfrow=c(3,3), mar=c(1,1,1,1))\n\nfor (layout in layouts) {\n\n  print(layout)\n\n  l <- do.call(layout, list(encounters.ig)) \n\n  plot(encounters.ig, vertex.label = NA,      vertex.label.dist = 2, \n     vertex.size = 3, vertex.label.cex = 0.2, edge.arrow.mode=0, layout=l, main=layout) }\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_as_star\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_components\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_in_circle\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_nicely\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_on_grid\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_on_sphere\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_randomly\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_dh\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_drl\"\n```\n:::\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_fr\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_gem\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_graphopt\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_kk\"\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_lgl\"\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in layout_with_lgl(structure(list(308, FALSE, c(86, 87, 88, 89, : At\nvendor/cigraph/src/layout/large_graph.c:174 : LGL layout does not support\ndisconnected graphs yet.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"layout_with_mds\"\n```\n:::\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-15-2.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nedge_density(encounters.ig, loops=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.007212657\n```\n:::\n\n```{.r .cell-code}\ntransitivity(encounters.ig, type=\"global\")  # net is treated as an undirected network\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\ntransitivity(as.undirected(encounters.ig, mode=\"collapse\")) # same as above\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0\n```\n:::\n\n```{.r .cell-code}\ntriad_census(encounters.ig)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in triad_census(encounters.ig): At\nvendor/cigraph/src/misc/motifs.c:1140 : Triad census called on an undirected\ngraph. All connections will be treated as mutual.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 4718886       0  102594       0       0       0       0       0       0\n[10]       0     876       0       0       0       0       0\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndiameter(encounters.ig, directed=F, weights=NA)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 14\n```\n:::\n\n```{.r .cell-code}\ndiameter(encounters.ig, directed=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 14\n```\n:::\n\n```{.r .cell-code}\ndiam <- get_diameter(encounters.ig, directed=T)\n\ndiam\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n+ 15/308 vertices, named, from 5d1ed35:\n [1] Aubrey96 Emard19       Gino587 Vandervort697  Jettie913 Rodriguez71 \n [4] Dortha70 Rutherford999 Anderson154 Lemke654   Johnnie679 Hand679    \n [7] Ted955 Reilly981       Sabine292 Feil794      Gino587 Block661      \n[10] Rosamaria757 Orn563    Cortez851 Price929     Nelida367 Emard19     \n[13] Chantell995 Krajcik437 Kandis954 Koepp521     Annelle169 Schmidt332 \n```\n:::\n\n```{.r .cell-code}\nclass(diam)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"igraph.vs\"\n```\n:::\n\n```{.r .cell-code}\nas.vector(diam)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] 161  24 145  19 143  31  95  71 261  66 120  57 188  35 187\n```\n:::\n\n```{.r .cell-code}\nvcol <- rep(\"gray40\", vcount(encounters.ig))\n\nvcol[diam] <- \"gold\"\n\necol <- rep(\"gray80\", ecount(encounters.ig))\n\necol[E(encounters.ig, path=diam)] <- \"orange\" \n\n# E(encounters.ig, path=diam) finds edges along a path, here 'diam'\n\nplot(encounters.ig, vertex.color=vcol,  vertex.label = NA,      vertex.label.dist = 2, \n     vertex.size = 3, vertex.label.cex = 0.2, edge.color=ecol, vertex.name = NA, edge.arrow.mode=0)\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n#deg \\<- degree(encounters.ig, mode=\"all\")\n\n#hist(deg, breaks=1:vcount(encounters.ig)-1, main=\"Histogram of node degree\")\n\n#deg.dist \\<- degree_distribution(encounters.ig, cumulative=T, mode=\"all\")\n\n#plot( x=0:max(deg), y=1-deg.dist, pch=19, cex=1.2, col=\"orange\",\n\n```         \n # xlab=\"Degree\", ylab=\"Cumulative Frequency\")\n```\n\n#degree(encounters.ig, mode=\"in\")\n\ncentr_degree(encounters.ig, mode=\"in\", normalized=T)\n\n#closeness(encounters.ig, mode=\"all\", weights=NA)\n\ncentr_clo(encounters.ig, mode=\"all\", normalized=T)\n\neigen_centrality(encounters.ig, directed=F, weights=NA)\n\ncentr_eigen(encounters.ig, directed=F, normalized=T)\n\nbetweenness(encounters.ig, directed=F, weights=NA)\n\nedge_betweenness(encounters.ig, directed=F, weights=NA)\n\ncentr_betw(encounters.ig, directed=F, normalized=T)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhs <- hub_score(encounters.ig, weights=NA)$vector\n\nas <- authority_score(encounters.ig, weights=NA)$vector\n\n\n\npar(mfrow=c(1,2))\n\n plot(encounters.ig,  vertex.label = NA,      vertex.label.dist = 2, \n     vertex.label.cex = 0.2,vertex.size=hs*50, main=\"Hubs\")\n\n plot(encounters.ig,  vertex.label = NA,      vertex.label.dist = 2, \n   vertex.label.cex = 0.2,vertex.size=as*30, main=\"Authorities\")\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n\n```{.r .cell-code}\n mean_distance(encounters.ig, directed=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6.160216\n```\n:::\n\n```{.r .cell-code}\n#distances(encounters.ig) # with edge weights\n\n#distances(encounters.ig, weights=NA) # ignore weights\n\nkc <- coreness(encounters.ig, mode=\"all\")\n\nplot(encounters.ig, vertex.size=kc*6, vertex.label=kc, vertex.color=kc)\n```\n\n::: {.cell-output-display}\n![](post_9_drug_files/figure-html/unnamed-chunk-18-2.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate assortativity\nassortativity_degree(encounters.ig, directed=F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.007701883\n```\n:::\n:::\n\n\nassortativity_degree() checks assortativity in node degrees\n\n# Create Gender Matrix\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngender <- attributes %>%\n  select(NAME, GENDER) \ngender\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 308 × 2\n   NAME                   GENDER\n   <chr>                  <chr> \n 1 Annice210 Gleason633   Female\n 2 Julianne852 Barrows492 Female\n 3 Alesha810 Heaney114    Female\n 4 Sandee884 Rice937      Female\n 5 Mia349 Runte676        Female\n 6 Damian46 Dach178       Male  \n 7 Nelida367 Emard19      Female\n 8 Anthony633 Kutch271    Male  \n 9 Mose244 Cummerata161   Male  \n10 Shila857 Heller342     Female\n# ℹ 298 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# first create a matrix\ngender.m <- matrix(0, \n                   nrow = nrow(gender),\n                   ncol = nrow(gender))\ndim(gender.m)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 308 308\n```\n:::\n\n```{.r .cell-code}\nfor(i in 1:nrow(gender)){\n  for(j in 1:nrow(gender)){\n    gender.m[i, j] <- ifelse(gender$GENDER[i] == gender$GENDER[j], 1, 0)\n  }\n}\n\ndiag(gender.m) <- 0\n\ncolnames(gender.m) <- gender$NAME\nrownames(gender.m) <- gender$NAME\n```\n:::\n\n\ngender.m + 2\\*encounters.m  \n\nThe above code doesn't work - but I think this would give the graph I want?\n",
    "supporting": [
      "post_9_drug_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}